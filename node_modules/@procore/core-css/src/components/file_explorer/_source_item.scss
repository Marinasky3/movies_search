@import "../../settings/variables";
@import "../../tools/forms";
@import "../../tools/ellipsis";

.source-item {
  $disabled: #{&}--disabled;
  $selected: #{&}--selected;
  $error: #{&}--error;

  position: relative;
  display: flex;
  align-items: center;
  padding: 0 spacing(xl) 0 spacing(xxl);
  @include typography-sm($source-item-color, 400);
  cursor: pointer;
  height: $source-item-height;

  &:before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    display: block;
    width: 4px;
    height: 100%;
    background-color: $source-item-tab-color-selected;
    transform: scaleX(0);
    transform-origin: center left;
    transition: transform 200ms ease-out;
    // prevent a one-pixel gap between focused and selected source items due to the box-shadow
    z-index: 1;
  }

  &--selected {
    @include typography-sm($source-item-color-selected, 700);
    background-color: $source-item-background-color-selected;

    &:before {
      transform: scaleX(1);
    }
  }

  &--error {
    color: $source-item-color-error;
  }

  &--disabled {
    cursor: not-allowed;
    color: $source-item-color-disabled;
  }

  &:hover {
    transition: background-color 150ms ease-out 150ms, color 150ms ease-out;

    &:not(#{$disabled}) {
      background-color: $source-item-background-color-hover;
    }

    &:not(#{$disabled}):not(#{$selected}):not(#{$error}) {
      color: $source-item-color-hover;
    }
  }

  &:focus,
  &--focused {
    @include focus();
    // compensate for border shift
    padding: 0 (spacing(xl) - 1) 0 (spacing(xxl) - 1);
  }

  &__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    width: 48px;
    height: 48px;

    #{$disabled} & {
      color: $source-item-icon-color-disabled;
    }
  }

  &__label {
    @include ellipsis();
  }
}
