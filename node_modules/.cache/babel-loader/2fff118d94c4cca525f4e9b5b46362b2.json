{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport { useDelayedCallback } from '../state/DelayedCallback';\nimport { useTimer } from '../state/Timer';\n/* HOOK */\n\nexport function useDelayedToggle(_a) {\n  var _b = _a.beforeDisable,\n      beforeDisable = _b === void 0 ? function () {\n    return true;\n  } : _b,\n      _c = _a.beforeEnable,\n      beforeEnable = _c === void 0 ? function () {\n    return true;\n  } : _c,\n      _d = _a.disableDelay,\n      disableDelay = _d === void 0 ? 0 : _d,\n      _e = _a.enableDelay,\n      enableDelay = _e === void 0 ? 0 : _e,\n      _f = _a.isEnabled,\n      isEnabled = _f === void 0 ? false : _f,\n      onDisable = _a.onDisable,\n      onEnable = _a.onEnable,\n      _g = _a.timer,\n      timer = _g === void 0 ? useTimer({}) : _g;\n  var handleEnable = React.useCallback(function () {\n    timer.reset();\n    return true;\n  }, [timer]);\n  var handleCancel = React.useCallback(function () {\n    timer.cancel();\n    return false;\n  }, [timer]);\n  var enable = useDelayedCallback({\n    after: onEnable,\n    before: isEnabled ? handleEnable : beforeEnable,\n    delay: enableDelay,\n    timer: timer\n  });\n  var disable = useDelayedCallback({\n    after: onDisable,\n    before: isEnabled ? beforeDisable : handleCancel,\n    delay: disableDelay,\n    timer: timer\n  });\n  return {\n    disable: disable,\n    enable: enable,\n    toggle: isEnabled ? disable : enable\n  };\n}\n/* DECORATOR */\n\nexport function withDelayedToggle(config) {\n  return function (Component) {\n    return function DelayedToggleComponent(props) {\n      return React.createElement(Component, __assign({}, props, {\n        delayedToggle: useDelayedToggle(__assign(__assign({}, config), props.DelayedToggle))\n      }));\n    };\n  };\n}\n/* RENDER PROP */\n\nexport var DelayedToggle = React.forwardRef(function DelayedToggle(props, ref) {\n  var children = props.children,\n      config = __rest(props, [\"children\"]);\n\n  var toggle = useDelayedToggle(config);\n  var element = typeof children === 'function' ? children(toggle) : children;\n  return element && React.cloneElement(element, {\n    ref: ref\n  });\n});\n/* CONTEXT */\n\nvar noop = function (method) {\n  return function () {\n    return console.warn(\"Could not call `\".concat(method, \"`, please wrap your component in an `<DelayedToggleProvider>`\"));\n  };\n};\n\nexport var initDelayedToggle = {\n  disable: noop('disable'),\n  enable: noop('enable'),\n  toggle: noop('toggle')\n};\nexport var DelayedToggleContext = React.createContext(initDelayedToggle);\nexport function DelayedToggleProvider(_a) {\n  var children = _a.children,\n      props = __rest(_a, [\"children\"]);\n\n  return React.createElement(DelayedToggleContext.Provider, {\n    value: useDelayedToggle(props)\n  }, children);\n}\nexport function useDelayedToggleContext() {\n  return React.useContext(DelayedToggleContext);\n}\nexport var consumeDelayedToggle = useDelayedToggleContext;","map":{"version":3,"sources":["../../../src/effects/DelayedToggle.tsx"],"names":[],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { useDelayedCallback } from '../state/DelayedCallback';\nimport { useTimer } from '../state/Timer';\n/* HOOK */\nexport function useDelayedToggle(_a) {\n    var _b = _a.beforeDisable, beforeDisable = _b === void 0 ? function () { return true; } : _b, _c = _a.beforeEnable, beforeEnable = _c === void 0 ? function () { return true; } : _c, _d = _a.disableDelay, disableDelay = _d === void 0 ? 0 : _d, _e = _a.enableDelay, enableDelay = _e === void 0 ? 0 : _e, _f = _a.isEnabled, isEnabled = _f === void 0 ? false : _f, onDisable = _a.onDisable, onEnable = _a.onEnable, _g = _a.timer, timer = _g === void 0 ? useTimer({}) : _g;\n    var handleEnable = React.useCallback(function () {\n        timer.reset();\n        return true;\n    }, [timer]);\n    var handleCancel = React.useCallback(function () {\n        timer.cancel();\n        return false;\n    }, [timer]);\n    var enable = useDelayedCallback({\n        after: onEnable,\n        before: isEnabled ? handleEnable : beforeEnable,\n        delay: enableDelay,\n        timer: timer,\n    });\n    var disable = useDelayedCallback({\n        after: onDisable,\n        before: isEnabled ? beforeDisable : handleCancel,\n        delay: disableDelay,\n        timer: timer,\n    });\n    return {\n        disable: disable,\n        enable: enable,\n        toggle: isEnabled ? disable : enable,\n    };\n}\n/* DECORATOR */\nexport function withDelayedToggle(config) {\n    return function (Component) {\n        return function DelayedToggleComponent(props) {\n            return (React.createElement(Component, __assign({}, props, { delayedToggle: useDelayedToggle(__assign(__assign({}, config), props.DelayedToggle)) })));\n        };\n    };\n}\n/* RENDER PROP */\nexport var DelayedToggle = React.forwardRef(function DelayedToggle(props, ref) {\n    var children = props.children, config = __rest(props, [\"children\"]);\n    var toggle = useDelayedToggle(config);\n    var element = typeof children === 'function'\n        ? children(toggle)\n        : children;\n    return element && React.cloneElement(element, { ref: ref });\n});\n/* CONTEXT */\nvar noop = function (method) { return function () {\n    return console.warn(\"Could not call `\".concat(method, \"`, please wrap your component in an `<DelayedToggleProvider>`\"));\n}; };\nexport var initDelayedToggle = {\n    disable: noop('disable'),\n    enable: noop('enable'),\n    toggle: noop('toggle'),\n};\nexport var DelayedToggleContext = React.createContext(initDelayedToggle);\nexport function DelayedToggleProvider(_a) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    return (React.createElement(DelayedToggleContext.Provider, { value: useDelayedToggle(props) }, children));\n}\nexport function useDelayedToggleContext() {\n    return React.useContext(DelayedToggleContext);\n}\nexport var consumeDelayedToggle = useDelayedToggleContext;\n"]},"metadata":{},"sourceType":"module"}