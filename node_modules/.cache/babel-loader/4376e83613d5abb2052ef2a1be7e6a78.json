{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nexport var Autofocus = React.forwardRef(function Autofocus(_a, ref) {\n  var children = _a.children,\n      _b = _a.enabled,\n      enabled = _b === void 0 ? true : _b,\n      props = __rest(_a, [\"children\", \"enabled\"]);\n\n  var childRef = children.ref;\n  var scope = React.createRef();\n  useAutofocus({\n    ref: scope,\n    enabled: enabled\n  });\n  useSharedRef({\n    ref: scope,\n    refs: [ref, childRef]\n  });\n\n  if (React.isValidElement(children)) {\n    return React.cloneElement(children, __assign(__assign({}, props), {\n      ref: scope\n    }));\n  }\n\n  return children;\n});\nexport function useAutofocus(_a) {\n  var _b = _a.enabled,\n      enabled = _b === void 0 ? true : _b,\n      ref = _a.ref;\n  React.useLayoutEffect(function () {\n    enabled && ref && ref.current && ref.current.focus();\n  }, [ref.current]);\n} // ==========\n// SHARED REF\n// ==========\n// TODO: Move to own hook\n\nfunction useSharedRef(_a) {\n  var ref = _a.ref,\n      refs = _a.refs;\n  React.useLayoutEffect(function () {\n    refs.forEach(function (reference) {\n      if (reference) {\n        if (typeof reference === 'function') {\n          reference;\n          reference(ref.current);\n        } else {\n          reference.current = ref.current;\n        }\n      }\n    });\n  }, [ref]);\n}","map":{"version":3,"sources":["../../../src/effects/Autofocus.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAP,MAAkB,OAAlB;AAYA,OAAO,IAAM,SAAS,GAAG,KAAK,CAAC,UAAN,CACvB,SAAS,SAAT,CAAmB,EAAnB,EAA2D,GAA3D,EAA8D;AAAzC,MAAA,QAAQ,GAAA,EAAA,CAAA,QAAR;AAAA,MAAU,EAAA,GAAA,EAAA,CAAA,OAAV;AAAA,MAAU,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,EAAxB;AAAA,MAA6B,KAAK,GAAA,MAAA,CAAA,EAAA,EAApC,CAAA,UAAA,EAAA,SAAA,CAAoC,CAAlC;;AACnB,MAAM,QAAQ,GAAI,QAAsC,CAAC,GAAzD;AACA,MAAM,KAAK,GAAG,KAAK,CAAC,SAAN,EAAd;AAEA,EAAA,YAAY,CAAC;AAAE,IAAA,GAAG,EAAE,KAAP;AAAc,IAAA,OAAO,EAAA;AAArB,GAAD,CAAZ;AACA,EAAA,YAAY,CAAC;AAAE,IAAA,GAAG,EAAE,KAAP;AAAc,IAAA,IAAI,EAAE,CAAC,GAAD,EAAM,QAAN;AAApB,GAAD,CAAZ;;AAEA,MAAI,KAAK,CAAC,cAAN,CAAqB,QAArB,CAAJ,EAAoC;AAClC,WAAO,KAAK,CAAC,YAAN,CAAmB,QAAnB,EAA2B,QAAA,CAAA,QAAA,CAAA,EAAA,EAAO,KAAP,CAAA,EAAY;AAAE,MAAA,GAAG,EAAE;AAAP,KAAZ,CAA3B,CAAP;AACD;;AAED,SAAO,QAAP;AACD,CAbsB,CAAlB;AAgBP,OAAM,SAAU,YAAV,CAAuB,EAAvB,EAAsD;MAA7B,EAAA,GAAA,EAAA,CAAA,O;MAAA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,E;MAAE,GAAG,GAAA,EAAA,CAAA,G;AAChD,EAAA,KAAK,CAAC,eAAN,CAAsB,YAAA;AACpB,IAAA,OAAO,IAAI,GAAX,IAAkB,GAAG,CAAC,OAAtB,IAAiC,GAAG,CAAC,OAAJ,CAAY,KAAZ,EAAjC;AACD,GAFD,EAEG,CAAC,GAAG,CAAC,OAAL,CAFH;AAGD,C,CAOD;AACA;AACA;AACA;;AAEA,SAAS,YAAT,CAAsB,EAAtB,EAAoD;MAA5B,GAAG,GAAA,EAAA,CAAA,G;MAAE,IAAI,GAAA,EAAA,CAAA,I;AAC/B,EAAA,KAAK,CAAC,eAAN,CAAsB,YAAA;AACpB,IAAA,IAAI,CAAC,OAAL,CACE,UAAC,SAAD,EAAiE;AAC/D,UAAI,SAAJ,EAAe;AACb,YAAI,OAAO,SAAP,KAAqB,UAAzB,EAAqC;AACnC,UAAA,SAAS;AACT,UAAA,SAAS,CAAC,GAAG,CAAC,OAAL,CAAT;AACD,SAHD,MAGO;AACL,UAAA,SAAS,CAAC,OAAV,GAAoB,GAAG,CAAC,OAAxB;AACD;AACF;AACF,KAVH;AAYD,GAbD,EAaG,CAAC,GAAD,CAbH;AAcD","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nexport var Autofocus = React.forwardRef(function Autofocus(_a, ref) {\n    var children = _a.children, _b = _a.enabled, enabled = _b === void 0 ? true : _b, props = __rest(_a, [\"children\", \"enabled\"]);\n    var childRef = children.ref;\n    var scope = React.createRef();\n    useAutofocus({ ref: scope, enabled: enabled });\n    useSharedRef({ ref: scope, refs: [ref, childRef] });\n    if (React.isValidElement(children)) {\n        return React.cloneElement(children, __assign(__assign({}, props), { ref: scope }));\n    }\n    return children;\n});\nexport function useAutofocus(_a) {\n    var _b = _a.enabled, enabled = _b === void 0 ? true : _b, ref = _a.ref;\n    React.useLayoutEffect(function () {\n        enabled && ref && ref.current && ref.current.focus();\n    }, [ref.current]);\n}\n// ==========\n// SHARED REF\n// ==========\n// TODO: Move to own hook\nfunction useSharedRef(_a) {\n    var ref = _a.ref, refs = _a.refs;\n    React.useLayoutEffect(function () {\n        refs.forEach(function (reference) {\n            if (reference) {\n                if (typeof reference === 'function') {\n                    reference;\n                    reference(ref.current);\n                }\n                else {\n                    reference.current = ref.current;\n                }\n            }\n        });\n    }, [ref]);\n}\n"]},"metadata":{},"sourceType":"module"}