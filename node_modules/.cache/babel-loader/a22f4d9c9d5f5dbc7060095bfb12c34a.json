{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport { ChevronLeft, Clear, EllipsisVertical } from '@procore/core-icons/dist';\nimport { mergeRefs } from '../../effects/mergeRefs';\nimport { useOverflowObserver } from '../../effects/OverflowObserver';\nimport { addSubcomponents } from '../../utils/addSubcomponents';\nimport { isReactElement } from '../../utils/isReactElement';\nimport { partition } from '../../utils/partition';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { OverlayTrigger } from '../OverlayTrigger';\nimport { Tooltip } from '../Tooltip';\nimport { StyledBody, StyledFooter, StyledFooterActions, StyledFooterNotation, StyledHeader, StyledHeaderActions, StyledHeaderBackAction, StyledMoreMenu, StyledPanel, StyledTitle, StyledCloseButton } from './Panel.styles';\nimport { Section, SectionProvider, LevelContext } from '../../layouts/Section';\nimport { useScroll } from '../../effects/Scroll';\nimport { useResize } from '../../effects/Resize';\nimport { useI18nContext } from '../../state/I18n';\nvar PanelContext = React.createContext({\n  isFooterSticky: false,\n  setIsFooterSticky: function () {}\n});\nvar maxVisibleIcons = 3;\nvar HeaderAction = React.forwardRef(function HeaderAction(_a, ref) {\n  var title = _a.title,\n      children = _a.children,\n      props = __rest(_a, [\"title\", \"children\"]);\n\n  return React.createElement(Tooltip, {\n    overlay: title,\n    ref: ref\n  }, React.createElement(Button, __assign({}, props, {\n    variant: \"tertiary\"\n  }), children));\n});\nvar MoreMenu = React.forwardRef(function MoreMenu(_a, ref) {\n  var children = _a.children;\n  return React.createElement(StyledMoreMenu, {\n    ref: ref\n  }, React.createElement(Menu, {\n    ref: function (node) {\n      return node === null || node === void 0 ? void 0 : node.focus();\n    }\n  }, React.createElement(Menu.Options, null, React.Children.map(children, function (child) {\n    if (isReactElement(child)) {\n      return React.createElement(Menu.Item, {\n        item: null,\n        key: child.props.title,\n        onClick: child.props.onClick\n      }, child.props.title);\n    }\n  }))));\n});\nexport var MoreIcon = function (_a) {\n  var children = _a.children,\n      qa = _a.qa;\n  return React.createElement(OverlayTrigger, {\n    trigger: \"click\",\n    placement: \"bottom-right\",\n    overlay: React.createElement(MoreMenu, null, children)\n  }, React.createElement(Button, {\n    \"data-qa\": qa === null || qa === void 0 ? void 0 : qa.moreIcon,\n    variant: \"tertiary\",\n    icon: React.createElement(EllipsisVertical, null)\n  }));\n};\nvar HeaderActions = React.forwardRef(function HeaderActions(_a, ref) {\n  var children = _a.children,\n      qa = _a.qa,\n      props = __rest(_a, [\"children\", \"qa\"]);\n\n  var iconsAmount = React.Children.count(children);\n\n  var _b = iconsAmount > maxVisibleIcons ? partition(function (_, index) {\n    return index > iconsAmount - maxVisibleIcons;\n  }, React.Children.toArray(children)) : [children, []],\n      visibleIcons = _b[0],\n      hiddenIcons = _b[1];\n\n  return React.createElement(StyledHeaderActions, __assign({}, props, {\n    ref: ref\n  }), visibleIcons, hiddenIcons.length > 0 && React.createElement(MoreIcon, {\n    qa: qa\n  }, hiddenIcons));\n});\nexport var TitleTooltip = function (_a) {\n  var children = _a.children,\n      overlay = _a.overlay,\n      isVisible = _a.isVisible;\n\n  if (!isVisible) {\n    return children;\n  }\n\n  return React.createElement(Tooltip, {\n    trigger: \"hover\",\n    overlay: React.createElement(Tooltip.Content, null, overlay),\n    placement: \"bottom\"\n  }, children);\n};\nvar Title = React.forwardRef(function Title(_a, ref) {\n  var children = _a.children,\n      qa = _a.qa,\n      props = __rest(_a, [\"children\", \"qa\"]);\n\n  var _b = useOverflowObserver(),\n      isOverflowingX = _b.isOverflowingX,\n      overflowRef = _b.ref;\n\n  return React.createElement(TitleTooltip, {\n    isVisible: isOverflowingX,\n    overlay: children\n  }, React.createElement(StyledTitle, __assign({}, props, {\n    ref: mergeRefs(overflowRef, ref),\n    intent: \"h2\",\n    \"data-qa\": qa === null || qa === void 0 ? void 0 : qa.title\n  }), children));\n});\nvar Header = React.forwardRef(function Header(_a, ref) {\n  var children = _a.children,\n      onClickBack = _a.onClickBack,\n      onClose = _a.onClose,\n      props = __rest(_a, [\"children\", \"onClickBack\", \"onClose\"]);\n\n  var I18n = useI18nContext();\n  return React.createElement(StyledHeader, __assign({}, props, {\n    ref: ref\n  }), React.createElement(StyledHeaderBackAction, {\n    active: onClickBack !== undefined\n  }, React.createElement(Button, {\n    variant: \"tertiary\",\n    onClick: onClickBack,\n    icon: React.createElement(ChevronLeft, null)\n  })), children, typeof onClose === 'function' && React.createElement(StyledCloseButton, null, React.createElement(HeaderAction, {\n    title: I18n.t('core.panel.close'),\n    icon: React.createElement(Clear, null),\n    onClick: onClose\n  })));\n});\nvar Body = React.forwardRef(function Body(_a, ref) {\n  var children = _a.children,\n      props = __rest(_a, [\"children\"]);\n\n  var bodyRef = React.useRef(null);\n  var setIsFooterSticky = React.useContext(PanelContext).setIsFooterSticky;\n\n  function calculateBodyScroll() {\n    if (!bodyRef.current) {\n      return;\n    }\n\n    var isScrollable = bodyRef.current.scrollHeight > bodyRef.current.clientHeight;\n\n    if (isScrollable) {\n      var isNotScrolledToBottom = bodyRef.current.scrollTop + bodyRef.current.clientHeight < bodyRef.current.scrollHeight;\n      setIsFooterSticky(isNotScrolledToBottom);\n    } else {\n      setIsFooterSticky(false);\n    }\n  }\n\n  React.useEffect(calculateBodyScroll, []);\n  useScroll({\n    onScroll: calculateBodyScroll,\n    scope: bodyRef\n  });\n  useResize({\n    onResize: calculateBodyScroll\n  });\n  return React.createElement(SectionProvider, null, React.createElement(LevelContext.Provider, {\n    value: 3\n  }, React.createElement(StyledBody, __assign({}, props, {\n    ref: mergeRefs(ref, bodyRef, calculateBodyScroll)\n  }), children)));\n});\nvar FooterNotation = React.forwardRef(function FooterNotation(_a, ref) {\n  var children = _a.children,\n      props = __rest(_a, [\"children\"]);\n\n  return React.createElement(StyledFooterNotation, __assign({}, props, {\n    ref: ref\n  }), children);\n});\nvar FooterActions = React.forwardRef(function FooterActions(_a, ref) {\n  var children = _a.children,\n      props = __rest(_a, [\"children\"]);\n\n  return React.createElement(StyledFooterActions, __assign({}, props, {\n    ref: ref\n  }), children);\n});\nvar Footer = React.forwardRef(function Footer(_a, ref) {\n  var children = _a.children,\n      props = __rest(_a, [\"children\"]);\n\n  var isFooterSticky = React.useContext(PanelContext).isFooterSticky;\n  return React.createElement(StyledFooter, __assign({}, props, {\n    ref: ref,\n    \"$hasShadow\": isFooterSticky\n  }), children);\n});\nvar Panel_ = React.forwardRef(function Panel(_a, ref) {\n  var children = _a.children,\n      props = __rest(_a, [\"children\"]);\n\n  var _b = React.useState(false),\n      isFooterSticky = _b[0],\n      setIsFooterSticky = _b[1];\n\n  return React.createElement(PanelContext.Provider, {\n    value: {\n      setIsFooterSticky: setIsFooterSticky,\n      isFooterSticky: isFooterSticky\n    }\n  }, React.createElement(StyledPanel, __assign({}, props, {\n    ref: ref\n  }), children));\n});\nPanel_.displayName = 'Panel';\nBody.displayName = 'Panel.Body';\nFooter.displayName = 'Panel.Footer';\nFooterActions.displayName = 'Panel.FooterActions';\nFooterNotation.displayName = 'Panel.FooterNotation';\nHeader.displayName = 'Panel.Header';\nHeaderAction.displayName = 'Panel.HeaderAction';\nHeaderActions.displayName = 'Panel.HeaderActions';\nTitle.displayName = 'Panel.Title';\nexport var Panel = addSubcomponents({\n  Body: Body,\n  Footer: Footer,\n  FooterActions: FooterActions,\n  FooterNotation: FooterNotation,\n  Header: Header,\n  HeaderAction: HeaderAction,\n  HeaderActions: HeaderActions,\n  Section: Section,\n  Title: Title\n}, Panel_);","map":{"version":3,"sources":["../../../../src/components/Panel/Panel.tsx"],"names":[],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { ChevronLeft, Clear, EllipsisVertical } from '@procore/core-icons/dist';\nimport { mergeRefs } from '../../effects/mergeRefs';\nimport { useOverflowObserver } from '../../effects/OverflowObserver';\nimport { addSubcomponents } from '../../utils/addSubcomponents';\nimport { isReactElement } from '../../utils/isReactElement';\nimport { partition } from '../../utils/partition';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { OverlayTrigger } from '../OverlayTrigger';\nimport { Tooltip } from '../Tooltip';\nimport { StyledBody, StyledFooter, StyledFooterActions, StyledFooterNotation, StyledHeader, StyledHeaderActions, StyledHeaderBackAction, StyledMoreMenu, StyledPanel, StyledTitle, StyledCloseButton, } from './Panel.styles';\nimport { Section, SectionProvider, LevelContext } from '../../layouts/Section';\nimport { useScroll } from '../../effects/Scroll';\nimport { useResize } from '../../effects/Resize';\nimport { useI18nContext } from '../../state/I18n';\nvar PanelContext = React.createContext({\n    isFooterSticky: false,\n    setIsFooterSticky: function () { },\n});\nvar maxVisibleIcons = 3;\nvar HeaderAction = React.forwardRef(function HeaderAction(_a, ref) {\n    var title = _a.title, children = _a.children, props = __rest(_a, [\"title\", \"children\"]);\n    return (React.createElement(Tooltip, { overlay: title, ref: ref },\n        React.createElement(Button, __assign({}, props, { variant: \"tertiary\" }), children)));\n});\nvar MoreMenu = React.forwardRef(function MoreMenu(_a, ref) {\n    var children = _a.children;\n    return (React.createElement(StyledMoreMenu, { ref: ref },\n        React.createElement(Menu, { ref: function (node) { return node === null || node === void 0 ? void 0 : node.focus(); } },\n            React.createElement(Menu.Options, null, React.Children.map(children, function (child) {\n                if (isReactElement(child)) {\n                    return (React.createElement(Menu.Item, { item: null, key: child.props.title, onClick: child.props.onClick }, child.props.title));\n                }\n            })))));\n});\nexport var MoreIcon = function (_a) {\n    var children = _a.children, qa = _a.qa;\n    return (React.createElement(OverlayTrigger, { trigger: \"click\", placement: \"bottom-right\", overlay: React.createElement(MoreMenu, null, children) },\n        React.createElement(Button, { \"data-qa\": qa === null || qa === void 0 ? void 0 : qa.moreIcon, variant: \"tertiary\", icon: React.createElement(EllipsisVertical, null) })));\n};\nvar HeaderActions = React.forwardRef(function HeaderActions(_a, ref) {\n    var children = _a.children, qa = _a.qa, props = __rest(_a, [\"children\", \"qa\"]);\n    var iconsAmount = React.Children.count(children);\n    var _b = iconsAmount > maxVisibleIcons\n        ? partition(function (_, index) { return index > iconsAmount - maxVisibleIcons; }, React.Children.toArray(children))\n        : [children, []], visibleIcons = _b[0], hiddenIcons = _b[1];\n    return (React.createElement(StyledHeaderActions, __assign({}, props, { ref: ref }),\n        visibleIcons,\n        hiddenIcons.length > 0 && React.createElement(MoreIcon, { qa: qa }, hiddenIcons)));\n});\nexport var TitleTooltip = function (_a) {\n    var children = _a.children, overlay = _a.overlay, isVisible = _a.isVisible;\n    if (!isVisible) {\n        return children;\n    }\n    return (React.createElement(Tooltip, { trigger: \"hover\", overlay: React.createElement(Tooltip.Content, null, overlay), placement: \"bottom\" }, children));\n};\nvar Title = React.forwardRef(function Title(_a, ref) {\n    var children = _a.children, qa = _a.qa, props = __rest(_a, [\"children\", \"qa\"]);\n    var _b = useOverflowObserver(), isOverflowingX = _b.isOverflowingX, overflowRef = _b.ref;\n    return (React.createElement(TitleTooltip, { isVisible: isOverflowingX, overlay: children },\n        React.createElement(StyledTitle, __assign({}, props, { ref: mergeRefs(overflowRef, ref), intent: \"h2\", \"data-qa\": qa === null || qa === void 0 ? void 0 : qa.title }), children)));\n});\nvar Header = React.forwardRef(function Header(_a, ref) {\n    var children = _a.children, onClickBack = _a.onClickBack, onClose = _a.onClose, props = __rest(_a, [\"children\", \"onClickBack\", \"onClose\"]);\n    var I18n = useI18nContext();\n    return (React.createElement(StyledHeader, __assign({}, props, { ref: ref }),\n        React.createElement(StyledHeaderBackAction, { active: onClickBack !== undefined },\n            React.createElement(Button, { variant: \"tertiary\", onClick: onClickBack, icon: React.createElement(ChevronLeft, null) })),\n        children,\n        typeof onClose === 'function' && (React.createElement(StyledCloseButton, null,\n            React.createElement(HeaderAction, { title: I18n.t('core.panel.close'), icon: React.createElement(Clear, null), onClick: onClose })))));\n});\nvar Body = React.forwardRef(function Body(_a, ref) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    var bodyRef = React.useRef(null);\n    var setIsFooterSticky = React.useContext(PanelContext).setIsFooterSticky;\n    function calculateBodyScroll() {\n        if (!bodyRef.current) {\n            return;\n        }\n        var isScrollable = bodyRef.current.scrollHeight > bodyRef.current.clientHeight;\n        if (isScrollable) {\n            var isNotScrolledToBottom = bodyRef.current.scrollTop + bodyRef.current.clientHeight <\n                bodyRef.current.scrollHeight;\n            setIsFooterSticky(isNotScrolledToBottom);\n        }\n        else {\n            setIsFooterSticky(false);\n        }\n    }\n    React.useEffect(calculateBodyScroll, []);\n    useScroll({ onScroll: calculateBodyScroll, scope: bodyRef });\n    useResize({ onResize: calculateBodyScroll });\n    return (React.createElement(SectionProvider, null,\n        React.createElement(LevelContext.Provider, { value: 3 },\n            React.createElement(StyledBody, __assign({}, props, { ref: mergeRefs(ref, bodyRef, calculateBodyScroll) }), children))));\n});\nvar FooterNotation = React.forwardRef(function FooterNotation(_a, ref) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    return (React.createElement(StyledFooterNotation, __assign({}, props, { ref: ref }), children));\n});\nvar FooterActions = React.forwardRef(function FooterActions(_a, ref) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    return (React.createElement(StyledFooterActions, __assign({}, props, { ref: ref }), children));\n});\nvar Footer = React.forwardRef(function Footer(_a, ref) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    var isFooterSticky = React.useContext(PanelContext).isFooterSticky;\n    return (React.createElement(StyledFooter, __assign({}, props, { ref: ref, \"$hasShadow\": isFooterSticky }), children));\n});\nvar Panel_ = React.forwardRef(function Panel(_a, ref) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    var _b = React.useState(false), isFooterSticky = _b[0], setIsFooterSticky = _b[1];\n    return (React.createElement(PanelContext.Provider, { value: {\n            setIsFooterSticky: setIsFooterSticky,\n            isFooterSticky: isFooterSticky,\n        } },\n        React.createElement(StyledPanel, __assign({}, props, { ref: ref }), children)));\n});\nPanel_.displayName = 'Panel';\nBody.displayName = 'Panel.Body';\nFooter.displayName = 'Panel.Footer';\nFooterActions.displayName = 'Panel.FooterActions';\nFooterNotation.displayName = 'Panel.FooterNotation';\nHeader.displayName = 'Panel.Header';\nHeaderAction.displayName = 'Panel.HeaderAction';\nHeaderActions.displayName = 'Panel.HeaderActions';\nTitle.displayName = 'Panel.Title';\nexport var Panel = addSubcomponents({\n    Body: Body,\n    Footer: Footer,\n    FooterActions: FooterActions,\n    FooterNotation: FooterNotation,\n    Header: Header,\n    HeaderAction: HeaderAction,\n    HeaderActions: HeaderActions,\n    Section: Section,\n    Title: Title,\n}, Panel_);\n"]},"metadata":{},"sourceType":"module"}