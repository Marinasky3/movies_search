{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nimport { CaretDown, CaretUp } from '@procore/core-icons/dist';\nimport React from 'react';\nimport { useBoundingRect } from '../../state/BoundingRect';\nimport { useEvent } from '../../state/Event';\nimport { useI18nContext } from '../../state/I18n';\nimport { addSubcomponents } from '../../utils/addSubcomponents';\nimport { MenuImperative } from '../MenuImperative';\nimport { OverlayTrigger, useOverlayTriggerContext } from '../OverlayTrigger';\nimport { StyledDropdownTab, StyledLink, StyledOverlay, StyledTab, StyledTabList, StyledTabs } from './Tabs.styles';\n\nfunction noop() {}\n\nexport var Link = React.forwardRef(function Link(_a, ref) {\n  var children = _a.children,\n      props = __rest(_a, [\"children\"]);\n\n  return React.createElement(StyledLink, __assign({\n    ref: ref\n  }, props), children);\n});\nexport var Tab = React.forwardRef(function Tab(_a, ref) {\n  var _b = _a.active,\n      active = _b === void 0 ? false : _b,\n      children = _a.children,\n      _c = _a.onLayout,\n      onLayout = _c === void 0 ? noop : _c,\n      _d = _a.overflowing,\n      overflowing = _d === void 0 ? false : _d,\n      _e = _a.dropdown,\n      dropdown = _e === void 0 ? false : _e,\n      _f = _a.variant,\n      variant = _f === void 0 ? '' : _f,\n      props = __rest(_a, [\"active\", \"children\", \"onLayout\", \"overflowing\", \"dropdown\", \"variant\"]);\n\n  var _g = useBoundingRect({}),\n      rectRef = _g.ref,\n      rect = _g.rect;\n\n  React.useEffect(function () {\n    onLayout(rect);\n    return function () {\n      // rerun layout with an empty object\n      // for proper resize on unmount\n      onLayout({});\n    };\n  }, [rect]);\n  return React.createElement(StyledTab, __assign({}, props, {\n    ref: rectRef,\n    active: active || variant === 'active'\n  }), React.createElement(\"div\", {\n    ref: ref\n  }, children));\n});\nexport var MoreMenu = React.forwardRef(function MoreMenu(_a, ref) {\n  var children = _a.children;\n  var ctx = useOverlayTriggerContext();\n  var menuRef = React.useRef(null);\n  React.useEffect(function () {\n    var _a, _b, _c, _d;\n\n    (_b = (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.el) === null || _b === void 0 ? void 0 : _b.focus();\n    (_c = menuRef.current) === null || _c === void 0 ? void 0 : _c.highlightFirst();\n    (_d = menuRef.current) === null || _d === void 0 ? void 0 : _d.highlightSelected();\n  }, []);\n\n  function onSelect(selection) {\n    ctx.hide(selection.event);\n  }\n\n  return React.createElement(StyledOverlay, {\n    ref: ref\n  }, React.createElement(MenuImperative, {\n    ref: menuRef,\n    onSelect: onSelect\n  }, React.createElement(MenuImperative.Options, null, React.Children.map(children, function (child, i) {\n    if (React.isValidElement(child)) {\n      return React.createElement(MenuImperative.Item, {\n        item: null,\n        key: i,\n        selected: child.props.active\n      }, React.cloneElement(child, {\n        ref: null\n      }));\n    }\n  }))));\n});\nvar Tabs_ = React.forwardRef(function Tabs(_a, ref) {\n  var children = _a.children,\n      className = _a.className,\n      _b = _a.dark,\n      dark = _b === void 0 ? false : _b,\n      qa = _a.qa,\n      props = __rest(_a, [\"children\", \"className\", \"dark\", \"qa\"]);\n\n  var i18n = useI18nContext();\n\n  var _c = React.useState([]),\n      rects = _c[0],\n      setRects = _c[1];\n\n  var _d = React.useState(false),\n      moreMenuIsShown = _d[0],\n      setMoreMenuIsShown = _d[1];\n\n  var resize = useEvent({\n    event: 'resize'\n  }).value;\n  var container = useBoundingRect({\n    dependencies: [resize]\n  });\n  var dropdown = useBoundingRect({\n    dependencies: [resize]\n  });\n  var subtotals = rects.reduce(function (_a, rect) {\n    var total = _a.total,\n        subtotals = _a.subtotals;\n    return {\n      subtotals: __spreadArray(__spreadArray([], subtotals, true), [total + rect.width], false),\n      total: total + rect.width\n    };\n  }, {\n    subtotals: new Array(),\n    total: 0\n  }).subtotals;\n  var index = subtotals.findIndex(function (val) {\n    return val >= container.rect.width - dropdown.rect.width;\n  });\n  var filtered = React.Children.toArray(children).filter(function (child) {\n    return child;\n  });\n  var overflowing = filtered.slice(index - 1);\n  var isOverflowingActive = React.Children.toArray(overflowing).some(function (child) {\n    return React.isValidElement(child) && child.props.active;\n  });\n  return React.createElement(StyledTabs, __assign({\n    ref: ref,\n    dark: dark,\n    index: index\n  }, props), React.createElement(StyledTabList, {\n    ref: container.ref\n  }, filtered.map(function (child, i) {\n    if (React.isValidElement(child)) return React.cloneElement(child, {\n      dark: dark,\n      onLayout: function (rect) {\n        setRects(function (rects) {\n          var oldRects = __spreadArray([], rects, true);\n\n          oldRects[i] = rect;\n          return oldRects;\n        });\n      }\n    });\n  }), React.createElement(OverlayTrigger, {\n    beforeShow: function () {\n      return setMoreMenuIsShown(true);\n    },\n    afterHide: function () {\n      return setMoreMenuIsShown(false);\n    },\n    trigger: \"click\",\n    placement: \"bottom-right\",\n    overlay: React.createElement(MoreMenu, null, overflowing),\n    ref: ref\n  }, React.createElement(StyledDropdownTab, {\n    ref: dropdown.ref,\n    active: isOverflowingActive,\n    dark: dark\n  }, React.createElement(StyledLink, {\n    \"data-qa\": qa === null || qa === void 0 ? void 0 : qa.more\n  }, i18n.t('core.tabs.more')), moreMenuIsShown ? React.createElement(CaretUp, {\n    size: \"sm\"\n  }) : React.createElement(CaretDown, {\n    size: \"sm\"\n  })))));\n});\nTabs_.displayName = 'Tabs';\nLink.displayName = 'Tabs.Link';\nTab.displayName = 'Tabs.Tab';\nexport var Tabs = addSubcomponents({\n  Link: Link,\n  Tab: Tab\n}, Tabs_);\nexport default Tabs;","map":{"version":3,"sources":["../../../../src/components/Tabs/Tabs.tsx"],"names":[],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { CaretDown, CaretUp } from '@procore/core-icons/dist';\nimport React from 'react';\nimport { useBoundingRect } from '../../state/BoundingRect';\nimport { useEvent } from '../../state/Event';\nimport { useI18nContext } from '../../state/I18n';\nimport { addSubcomponents } from '../../utils/addSubcomponents';\nimport { MenuImperative } from '../MenuImperative';\nimport { OverlayTrigger, useOverlayTriggerContext } from '../OverlayTrigger';\nimport { StyledDropdownTab, StyledLink, StyledOverlay, StyledTab, StyledTabList, StyledTabs, } from './Tabs.styles';\nfunction noop() { }\nexport var Link = React.forwardRef(function Link(_a, ref) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    return (React.createElement(StyledLink, __assign({ ref: ref }, props), children));\n});\nexport var Tab = React.forwardRef(function Tab(_a, ref) {\n    var _b = _a.active, active = _b === void 0 ? false : _b, children = _a.children, _c = _a.onLayout, onLayout = _c === void 0 ? noop : _c, _d = _a.overflowing, overflowing = _d === void 0 ? false : _d, _e = _a.dropdown, dropdown = _e === void 0 ? false : _e, _f = _a.variant, variant = _f === void 0 ? '' : _f, props = __rest(_a, [\"active\", \"children\", \"onLayout\", \"overflowing\", \"dropdown\", \"variant\"]);\n    var _g = useBoundingRect({}), rectRef = _g.ref, rect = _g.rect;\n    React.useEffect(function () {\n        onLayout(rect);\n        return function () {\n            // rerun layout with an empty object\n            // for proper resize on unmount\n            onLayout({});\n        };\n    }, [rect]);\n    return (React.createElement(StyledTab, __assign({}, props, { ref: rectRef, active: active || variant === 'active' }),\n        React.createElement(\"div\", { ref: ref }, children)));\n});\nexport var MoreMenu = React.forwardRef(function MoreMenu(_a, ref) {\n    var children = _a.children;\n    var ctx = useOverlayTriggerContext();\n    var menuRef = React.useRef(null);\n    React.useEffect(function () {\n        var _a, _b, _c, _d;\n        (_b = (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.el) === null || _b === void 0 ? void 0 : _b.focus();\n        (_c = menuRef.current) === null || _c === void 0 ? void 0 : _c.highlightFirst();\n        (_d = menuRef.current) === null || _d === void 0 ? void 0 : _d.highlightSelected();\n    }, []);\n    function onSelect(selection) {\n        ctx.hide(selection.event);\n    }\n    return (React.createElement(StyledOverlay, { ref: ref },\n        React.createElement(MenuImperative, { ref: menuRef, onSelect: onSelect },\n            React.createElement(MenuImperative.Options, null, React.Children.map(children, function (child, i) {\n                if (React.isValidElement(child)) {\n                    return (React.createElement(MenuImperative.Item, { item: null, key: i, selected: child.props.active }, React.cloneElement(child, { ref: null })));\n                }\n            })))));\n});\nvar Tabs_ = React.forwardRef(function Tabs(_a, ref) {\n    var children = _a.children, className = _a.className, _b = _a.dark, dark = _b === void 0 ? false : _b, qa = _a.qa, props = __rest(_a, [\"children\", \"className\", \"dark\", \"qa\"]);\n    var i18n = useI18nContext();\n    var _c = React.useState([]), rects = _c[0], setRects = _c[1];\n    var _d = React.useState(false), moreMenuIsShown = _d[0], setMoreMenuIsShown = _d[1];\n    var resize = useEvent({ event: 'resize' }).value;\n    var container = useBoundingRect({ dependencies: [resize] });\n    var dropdown = useBoundingRect({ dependencies: [resize] });\n    var subtotals = rects.reduce(function (_a, rect) {\n        var total = _a.total, subtotals = _a.subtotals;\n        return ({\n            subtotals: __spreadArray(__spreadArray([], subtotals, true), [total + rect.width], false),\n            total: total + rect.width,\n        });\n    }, { subtotals: new Array(), total: 0 }).subtotals;\n    var index = subtotals.findIndex(function (val) { return val >= container.rect.width - dropdown.rect.width; });\n    var filtered = React.Children.toArray(children).filter(function (child) { return child; });\n    var overflowing = filtered.slice(index - 1);\n    var isOverflowingActive = React.Children.toArray(overflowing).some(function (child) { return React.isValidElement(child) && child.props.active; });\n    return (React.createElement(StyledTabs, __assign({ ref: ref, dark: dark, index: index }, props),\n        React.createElement(StyledTabList, { ref: container.ref },\n            filtered.map(function (child, i) {\n                if (React.isValidElement(child))\n                    return React.cloneElement(child, {\n                        dark: dark,\n                        onLayout: function (rect) {\n                            setRects(function (rects) {\n                                var oldRects = __spreadArray([], rects, true);\n                                oldRects[i] = rect;\n                                return oldRects;\n                            });\n                        },\n                    });\n            }),\n            React.createElement(OverlayTrigger, { beforeShow: function () { return setMoreMenuIsShown(true); }, afterHide: function () { return setMoreMenuIsShown(false); }, trigger: \"click\", placement: \"bottom-right\", overlay: React.createElement(MoreMenu, null, overflowing), ref: ref },\n                React.createElement(StyledDropdownTab, { ref: dropdown.ref, active: isOverflowingActive, dark: dark },\n                    React.createElement(StyledLink, { \"data-qa\": qa === null || qa === void 0 ? void 0 : qa.more }, i18n.t('core.tabs.more')),\n                    moreMenuIsShown ? (React.createElement(CaretUp, { size: \"sm\" })) : (React.createElement(CaretDown, { size: \"sm\" })))))));\n});\nTabs_.displayName = 'Tabs';\nLink.displayName = 'Tabs.Link';\nTab.displayName = 'Tabs.Tab';\nexport var Tabs = addSubcomponents({\n    Link: Link,\n    Tab: Tab,\n}, Tabs_);\nexport default Tabs;\n"]},"metadata":{},"sourceType":"module"}