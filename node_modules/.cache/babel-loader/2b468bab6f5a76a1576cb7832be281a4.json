{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { Clear } from '@procore/core-icons/dist';\nimport React from 'react';\nimport { withDeprecation } from '../../effects/Deprecation';\nimport { mergeRefs } from '../../effects/mergeRefs';\nimport { useOverflowObserver } from '../../effects/OverflowObserver';\nimport { useScrollLock } from '../../effects/ScrollLock';\nimport { Visibility } from '../../state/Visibility';\nimport { useLayoutEventListener } from '../../effects/EventListener';\nimport { addSubcomponents } from '../../utils/addSubcomponents';\nimport { Button } from '../Button';\nimport { Portal } from '../Portal';\nimport { StyledModal, StyledModalBody, StyledModalButtons, StyledModalCancel, StyledModalContainer, StyledModalContent, StyledModalFooter, StyledModalFooterNotation, StyledModalHeader, StyledModalHeading, StyledModalScrim, StyledModalWarningIcon, fadeInClassName, fadeOutClassName, StyledModalFooterSummary } from './Modal.styles';\nimport { Section, SectionProvider, LevelContext } from '../../layouts/Section';\n\nfunction noop() {}\n\nvar ModalContext = React.createContext({\n  isBodyScrolled: false,\n  setIsBodyScrolled: noop\n});\nvar ModalClosableHeader = React.forwardRef(function (_a, ref) {\n  var children = _a.children,\n      onClose = _a.onClose,\n      qa = _a.qa,\n      props = __rest(_a, [\"children\", \"onClose\", \"qa\"]);\n\n  var isBodyScrolled = React.useContext(ModalContext).isBodyScrolled;\n  return React.createElement(StyledModalHeader, __assign({\n    \"$isBodyScrolled\": isBodyScrolled\n  }, props, {\n    ref: ref\n  }), React.createElement(StyledModalHeading, null, children), onClose && React.createElement(StyledModalCancel, null, React.createElement(Button, {\n    \"data-qa\": qa === null || qa === void 0 ? void 0 : qa.closeButton,\n    onClick: onClose,\n    icon: React.createElement(Clear, null),\n    variant: \"tertiary\",\n    tabIndex: -1\n  })));\n});\nvar ModalContainer = React.forwardRef(function (_a, ref) {\n  var placement = _a.placement,\n      width = _a.width,\n      props = __rest(_a, [\"placement\", \"width\"]);\n\n  return React.createElement(StyledModalContainer, __assign({}, props, {\n    shadowStrength: 4,\n    \"$placement\": placement,\n    \"$width\": width,\n    ref: ref\n  }));\n});\nvar ModalBody = React.forwardRef(function (_a, ref) {\n  var children = _a.children,\n      _b = _a.noSideSpacing,\n      noSideSpacing = _b === void 0 ? false : _b,\n      props = __rest(_a, [\"children\", \"noSideSpacing\"]);\n\n  var _c = useOverflowObserver(),\n      isOverflowingY = _c.isOverflowingY,\n      overflowRef = _c.ref;\n\n  var scrollRef = React.useRef(null);\n  var setIsBodyScrolled = React.useContext(ModalContext).setIsBodyScrolled;\n  useLayoutEventListener({\n    event: 'scroll',\n    handler: function (e) {\n      setIsBodyScrolled(e.currentTarget.scrollTop > 0);\n    },\n    scope: scrollRef\n  });\n  return React.createElement(SectionProvider, null, React.createElement(LevelContext.Provider, {\n    value: 3\n  }, React.createElement(StyledModalBody, __assign({}, props, {\n    isOverflowingY: isOverflowingY,\n    noSideSpacing: noSideSpacing,\n    ref: mergeRefs(overflowRef, scrollRef, ref)\n  }), children)));\n});\nvar ModalFooterSummary = React.forwardRef(function (_a, ref) {\n  var children = _a.children,\n      props = __rest(_a, [\"children\"]);\n\n  return React.createElement(StyledModalFooterSummary, __assign({}, props, {\n    ref: ref\n  }), children);\n});\nvar ModalFooterNotation = React.forwardRef(function (_a, ref) {\n  var children = _a.children,\n      props = __rest(_a, [\"children\"]);\n\n  return React.createElement(StyledModalFooterNotation, __assign({\n    intent: \"small\",\n    color: \"gray45\",\n    italic: true\n  }, props, {\n    ref: ref\n  }), children);\n});\nvar Modal_ = React.forwardRef(function (_a, ref) {\n  var children = _a.children,\n      _b = _a.onClickOverlay,\n      onClickOverlay = _b === void 0 ? noop : _b,\n      _c = _a.open,\n      open = _c === void 0 ? false : _c,\n      _d = _a.placement,\n      placement = _d === void 0 ? 'center' : _d,\n      props = __rest(_a, [\"children\", \"onClickOverlay\", \"open\", \"placement\"]);\n\n  useScrollLock(open);\n\n  var _e = React.useState(open),\n      visible = _e[0],\n      setVisible = _e[1];\n\n  var _f = React.useState(''),\n      fadeType = _f[0],\n      setFadeType = _f[1];\n\n  var _g = React.useState(false),\n      isBodyScrolled = _g[0],\n      setIsBodyScrolled = _g[1];\n\n  React.useEffect(function () {\n    if (open) {\n      setVisible(true);\n      setTimeout(function () {\n        setFadeType(fadeInClassName);\n      }, 0);\n    } else {\n      setFadeType(fadeOutClassName);\n    }\n  }, [open]);\n\n  var onTransitionEnd = function () {\n    if (fadeType === fadeOutClassName) {\n      setVisible(false);\n    }\n  };\n\n  return visible ? React.createElement(Portal, null, React.createElement(StyledModal, {\n    className: fadeType,\n    ref: ref,\n    onTransitionEnd: onTransitionEnd\n  }, React.createElement(StyledModalScrim, {\n    onClick: onClickOverlay\n  }), React.createElement(ModalContainer, __assign({}, props, {\n    placement: placement\n  }), React.createElement(StyledModalContent, null, React.createElement(ModalContext.Provider, {\n    value: {\n      isBodyScrolled: isBodyScrolled,\n      setIsBodyScrolled: setIsBodyScrolled\n    }\n  }, children))))) : null;\n});\nexport var ConfirmModal = React.forwardRef(function (_a, ref) {\n  var children = _a.children,\n      headline = _a.headline,\n      onClose = _a.onClose,\n      props = __rest(_a, [\"children\", \"headline\", \"onClose\"]);\n\n  return React.createElement(Modal, __assign({}, props, {\n    ref: ref\n  }), React.createElement(ModalClosableHeader, {\n    onClose: onClose\n  }, React.createElement(StyledModalWarningIcon, {\n    size: \"lg\"\n  }), headline), children);\n});\nModal_.displayName = 'Modal';\nConfirmModal.displayName = 'ConfirmModal';\nModalBody.displayName = 'Modal.Body';\nModalFooterNotation.displayName = 'Modal.FooterNotation';\nModalFooterSummary.displayName = 'Modal.FooterSummary';\nvar Body = ModalBody;\nvar Container = ModalContainer;\nvar Content = StyledModalContent;\nvar FooterSummary = ModalFooterSummary;\nvar Footer = StyledModalFooter;\nvar FooterButtons = StyledModalButtons;\nvar FooterNotation = ModalFooterNotation;\nvar Header = ModalClosableHeader;\nvar Overlay = StyledModal;\nvar Scrim = StyledModalScrim;\nvar State = withDeprecation({\n  oldThing: 'Modal.State'\n})(Visibility);\nexport var Modal = addSubcomponents({\n  Body: Body,\n  Container: Container,\n  Content: Content,\n  Footer: Footer,\n  FooterButtons: FooterButtons,\n  FooterNotation: FooterNotation,\n  FooterSummary: FooterSummary,\n  Header: Header,\n  Overlay: Overlay,\n  Scrim: Scrim,\n  State: State,\n  Section: Section\n}, Modal_);","map":{"version":3,"sources":["../../../../src/components/Modal/Modal.tsx"],"names":[],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Clear } from '@procore/core-icons/dist';\nimport React from 'react';\nimport { withDeprecation } from '../../effects/Deprecation';\nimport { mergeRefs } from '../../effects/mergeRefs';\nimport { useOverflowObserver } from '../../effects/OverflowObserver';\nimport { useScrollLock } from '../../effects/ScrollLock';\nimport { Visibility } from '../../state/Visibility';\nimport { useLayoutEventListener } from '../../effects/EventListener';\nimport { addSubcomponents } from '../../utils/addSubcomponents';\nimport { Button } from '../Button';\nimport { Portal } from '../Portal';\nimport { StyledModal, StyledModalBody, StyledModalButtons, StyledModalCancel, StyledModalContainer, StyledModalContent, StyledModalFooter, StyledModalFooterNotation, StyledModalHeader, StyledModalHeading, StyledModalScrim, StyledModalWarningIcon, fadeInClassName, fadeOutClassName, StyledModalFooterSummary, } from './Modal.styles';\nimport { Section, SectionProvider, LevelContext } from '../../layouts/Section';\nfunction noop() { }\nvar ModalContext = React.createContext({\n    isBodyScrolled: false,\n    setIsBodyScrolled: noop,\n});\nvar ModalClosableHeader = React.forwardRef(function (_a, ref) {\n    var children = _a.children, onClose = _a.onClose, qa = _a.qa, props = __rest(_a, [\"children\", \"onClose\", \"qa\"]);\n    var isBodyScrolled = React.useContext(ModalContext).isBodyScrolled;\n    return (React.createElement(StyledModalHeader, __assign({ \"$isBodyScrolled\": isBodyScrolled }, props, { ref: ref }),\n        React.createElement(StyledModalHeading, null, children),\n        onClose && (React.createElement(StyledModalCancel, null,\n            React.createElement(Button, { \"data-qa\": qa === null || qa === void 0 ? void 0 : qa.closeButton, onClick: onClose, icon: React.createElement(Clear, null), variant: \"tertiary\", tabIndex: -1 })))));\n});\nvar ModalContainer = React.forwardRef(function (_a, ref) {\n    var placement = _a.placement, width = _a.width, props = __rest(_a, [\"placement\", \"width\"]);\n    return (React.createElement(StyledModalContainer, __assign({}, props, { shadowStrength: 4, \"$placement\": placement, \"$width\": width, ref: ref })));\n});\nvar ModalBody = React.forwardRef(function (_a, ref) {\n    var children = _a.children, _b = _a.noSideSpacing, noSideSpacing = _b === void 0 ? false : _b, props = __rest(_a, [\"children\", \"noSideSpacing\"]);\n    var _c = useOverflowObserver(), isOverflowingY = _c.isOverflowingY, overflowRef = _c.ref;\n    var scrollRef = React.useRef(null);\n    var setIsBodyScrolled = React.useContext(ModalContext).setIsBodyScrolled;\n    useLayoutEventListener({\n        event: 'scroll',\n        handler: function (e) {\n            setIsBodyScrolled(e.currentTarget.scrollTop > 0);\n        },\n        scope: scrollRef,\n    });\n    return (React.createElement(SectionProvider, null,\n        React.createElement(LevelContext.Provider, { value: 3 },\n            React.createElement(StyledModalBody, __assign({}, props, { isOverflowingY: isOverflowingY, noSideSpacing: noSideSpacing, ref: mergeRefs(overflowRef, scrollRef, ref) }), children))));\n});\nvar ModalFooterSummary = React.forwardRef(function (_a, ref) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    return (React.createElement(StyledModalFooterSummary, __assign({}, props, { ref: ref }), children));\n});\nvar ModalFooterNotation = React.forwardRef(function (_a, ref) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    return (React.createElement(StyledModalFooterNotation, __assign({ intent: \"small\", color: \"gray45\", italic: true }, props, { ref: ref }), children));\n});\nvar Modal_ = React.forwardRef(function (_a, ref) {\n    var children = _a.children, _b = _a.onClickOverlay, onClickOverlay = _b === void 0 ? noop : _b, _c = _a.open, open = _c === void 0 ? false : _c, _d = _a.placement, placement = _d === void 0 ? 'center' : _d, props = __rest(_a, [\"children\", \"onClickOverlay\", \"open\", \"placement\"]);\n    useScrollLock(open);\n    var _e = React.useState(open), visible = _e[0], setVisible = _e[1];\n    var _f = React.useState(''), fadeType = _f[0], setFadeType = _f[1];\n    var _g = React.useState(false), isBodyScrolled = _g[0], setIsBodyScrolled = _g[1];\n    React.useEffect(function () {\n        if (open) {\n            setVisible(true);\n            setTimeout(function () {\n                setFadeType(fadeInClassName);\n            }, 0);\n        }\n        else {\n            setFadeType(fadeOutClassName);\n        }\n    }, [open]);\n    var onTransitionEnd = function () {\n        if (fadeType === fadeOutClassName) {\n            setVisible(false);\n        }\n    };\n    return visible ? (React.createElement(Portal, null,\n        React.createElement(StyledModal, { className: fadeType, ref: ref, onTransitionEnd: onTransitionEnd },\n            React.createElement(StyledModalScrim, { onClick: onClickOverlay }),\n            React.createElement(ModalContainer, __assign({}, props, { placement: placement }),\n                React.createElement(StyledModalContent, null,\n                    React.createElement(ModalContext.Provider, { value: { isBodyScrolled: isBodyScrolled, setIsBodyScrolled: setIsBodyScrolled } }, children)))))) : null;\n});\nexport var ConfirmModal = React.forwardRef(function (_a, ref) {\n    var children = _a.children, headline = _a.headline, onClose = _a.onClose, props = __rest(_a, [\"children\", \"headline\", \"onClose\"]);\n    return (React.createElement(Modal, __assign({}, props, { ref: ref }),\n        React.createElement(ModalClosableHeader, { onClose: onClose },\n            React.createElement(StyledModalWarningIcon, { size: \"lg\" }),\n            headline),\n        children));\n});\nModal_.displayName = 'Modal';\nConfirmModal.displayName = 'ConfirmModal';\nModalBody.displayName = 'Modal.Body';\nModalFooterNotation.displayName = 'Modal.FooterNotation';\nModalFooterSummary.displayName = 'Modal.FooterSummary';\nvar Body = ModalBody;\nvar Container = ModalContainer;\nvar Content = StyledModalContent;\nvar FooterSummary = ModalFooterSummary;\nvar Footer = StyledModalFooter;\nvar FooterButtons = StyledModalButtons;\nvar FooterNotation = ModalFooterNotation;\nvar Header = ModalClosableHeader;\nvar Overlay = StyledModal;\nvar Scrim = StyledModalScrim;\nvar State = withDeprecation({ oldThing: 'Modal.State' })(Visibility);\nexport var Modal = addSubcomponents({\n    Body: Body,\n    Container: Container,\n    Content: Content,\n    Footer: Footer,\n    FooterButtons: FooterButtons,\n    FooterNotation: FooterNotation,\n    FooterSummary: FooterSummary,\n    Header: Header,\n    Overlay: Overlay,\n    Scrim: Scrim,\n    State: State,\n    Section: Section,\n}, Modal_);\n"]},"metadata":{},"sourceType":"module"}