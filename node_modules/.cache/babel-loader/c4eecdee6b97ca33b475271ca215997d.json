{"ast":null,"code":"var __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nimport React from 'react'; // TODO this is kind of hacky and just to satisfy gatsby. There are other usages of\n// window in the library which don't trigger this error, so we should probably figure\n// out what's going on here\n\nfunction getWindow() {\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n}\n\nexport function useLayoutEventListener(_a) {\n  var _b = _a.dependencies,\n      dependencies = _b === void 0 ? [] : _b,\n      event = _a.event,\n      handler = _a.handler,\n      _c = _a.options,\n      options = _c === void 0 ? {} : _c,\n      scope = _a.scope,\n      _d = _a.noopHandler,\n      noopHandler = _d === void 0 ? false : _d;\n\n  if (!event) {\n    console.warn(\"\\\"event\\\" option missing, no listeners added\");\n  } else if (!handler) {\n    console.warn(\"\\\"handler\\\" option missing, no listeners added\");\n  }\n\n  var actualScope = scope === getWindow() || !scope ? {\n    current: getWindow()\n  } : scope || {};\n  var listener = useEventCallback({\n    handler: handler,\n    dependencies: dependencies\n  });\n  React.useLayoutEffect(function () {\n    if (noopHandler) {\n      return;\n    }\n\n    var current = actualScope.current;\n\n    if (current) {\n      current.addEventListener(event, listener, options);\n      return function () {\n        return current.removeEventListener(event, listener, options);\n      };\n    }\n  }, [noopHandler, event, listener, actualScope.current]);\n}\nexport function useEventListener(_a) {\n  var _b = _a.dependencies,\n      dependencies = _b === void 0 ? [] : _b,\n      event = _a.event,\n      handler = _a.handler,\n      _c = _a.options,\n      options = _c === void 0 ? {} : _c,\n      scope = _a.scope,\n      _d = _a.noopHandler,\n      noopHandler = _d === void 0 ? false : _d;\n\n  if (!event) {\n    console.warn(\"\\\"event\\\" option missing, no listeners added\");\n  } else if (!handler) {\n    console.warn(\"\\\"handler\\\" option missing, no listeners added\");\n  }\n\n  var actualScope = scope === getWindow() || !scope ? {\n    current: getWindow()\n  } : scope || {};\n  var listener = useEventCallback({\n    handler: handler,\n    dependencies: dependencies\n  });\n  React.useEffect(function () {\n    if (noopHandler) {\n      return;\n    }\n\n    var current = actualScope.current;\n\n    if (current) {\n      current.addEventListener(event, listener, options);\n      return function () {\n        return current.removeEventListener(event, listener, options);\n      };\n    }\n  }, [noopHandler, event, listener, actualScope.current]);\n}\nexport function useEventCallback(_a) {\n  var handler = _a.handler,\n      _b = _a.dependencies,\n      dependencies = _b === void 0 ? [] : _b;\n  var ref = React.useRef(handler);\n  React.useLayoutEffect(function () {\n    ref.current = handler;\n  }, __spreadArray([handler], dependencies, true));\n  return React.useCallback(function (event) {\n    return ref.current(event);\n  }, []);\n}","map":{"version":3,"sources":["../../../src/effects/EventListener.ts"],"names":[],"mappings":"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","sourcesContent":["var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport React from 'react';\n// TODO this is kind of hacky and just to satisfy gatsby. There are other usages of\n// window in the library which don't trigger this error, so we should probably figure\n// out what's going on here\nfunction getWindow() {\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n}\nexport function useLayoutEventListener(_a) {\n    var _b = _a.dependencies, dependencies = _b === void 0 ? [] : _b, event = _a.event, handler = _a.handler, _c = _a.options, options = _c === void 0 ? {} : _c, scope = _a.scope, _d = _a.noopHandler, noopHandler = _d === void 0 ? false : _d;\n    if (!event) {\n        console.warn(\"\\\"event\\\" option missing, no listeners added\");\n    }\n    else if (!handler) {\n        console.warn(\"\\\"handler\\\" option missing, no listeners added\");\n    }\n    var actualScope = scope === getWindow() || !scope\n        ? { current: getWindow() }\n        : scope || {};\n    var listener = useEventCallback({ handler: handler, dependencies: dependencies });\n    React.useLayoutEffect(function () {\n        if (noopHandler) {\n            return;\n        }\n        var current = actualScope.current;\n        if (current) {\n            current.addEventListener(event, listener, options);\n            return function () { return current.removeEventListener(event, listener, options); };\n        }\n    }, [noopHandler, event, listener, actualScope.current]);\n}\nexport function useEventListener(_a) {\n    var _b = _a.dependencies, dependencies = _b === void 0 ? [] : _b, event = _a.event, handler = _a.handler, _c = _a.options, options = _c === void 0 ? {} : _c, scope = _a.scope, _d = _a.noopHandler, noopHandler = _d === void 0 ? false : _d;\n    if (!event) {\n        console.warn(\"\\\"event\\\" option missing, no listeners added\");\n    }\n    else if (!handler) {\n        console.warn(\"\\\"handler\\\" option missing, no listeners added\");\n    }\n    var actualScope = scope === getWindow() || !scope\n        ? { current: getWindow() }\n        : scope || {};\n    var listener = useEventCallback({ handler: handler, dependencies: dependencies });\n    React.useEffect(function () {\n        if (noopHandler) {\n            return;\n        }\n        var current = actualScope.current;\n        if (current) {\n            current.addEventListener(event, listener, options);\n            return function () { return current.removeEventListener(event, listener, options); };\n        }\n    }, [noopHandler, event, listener, actualScope.current]);\n}\nexport function useEventCallback(_a) {\n    var handler = _a.handler, _b = _a.dependencies, dependencies = _b === void 0 ? [] : _b;\n    var ref = React.useRef(handler);\n    React.useLayoutEffect(function () {\n        ref.current = handler;\n    }, __spreadArray([handler], dependencies, true));\n    return React.useCallback(function (event) { return ref.current(event); }, []);\n}\n"]},"metadata":{},"sourceType":"module"}