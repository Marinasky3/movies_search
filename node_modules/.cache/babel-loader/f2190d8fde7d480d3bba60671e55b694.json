{"ast":null,"code":"import { detectPrng, factory } from 'ulid';\nimport { mergeDeepRight } from 'ramda';\nvar prng = detectPrng(true); // pass `true` to allow insecure Math.rand\n\nvar ulid = factory(prng);\n\nvar Analytics =\n/** @class */\nfunction () {\n  function Analytics(_a) {\n    var _b = _a.bodyParams,\n        bodyParams = _b === void 0 ? {} : _b,\n        client = _a.client,\n        endpoint = _a.endpoint,\n        _c = _a.headers,\n        headers = _c === void 0 ? {} : _c;\n    this.endpoint = endpoint;\n    this.headers = headers;\n    this.bodyParams = bodyParams;\n    this.client = client;\n    this.trackEvent = this.trackEvent.bind(this);\n  }\n\n  Analytics.prototype.trackEvent = function (event, properties) {\n    if (properties === void 0) {\n      properties = {};\n    }\n\n    var time = new Date();\n    return this.client(this.endpoint, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify(mergeDeepRight({\n        key: event,\n        properties: properties,\n        timestamp: time,\n        event_id: ulid(),\n        page_id: ulid()\n      }, this.bodyParams))\n    });\n  };\n\n  return Analytics;\n}();\n\nexport default Analytics;","map":{"version":3,"sources":["../../../src/utils/genericAnalyticsClient.ts"],"names":[],"mappings":"AAAA,SAAS,UAAT,EAAqB,OAArB,QAAoC,MAApC;AACA,SAAS,cAAT,QAA+B,OAA/B;AAEA,IAAM,IAAI,GAAG,UAAU,CAAC,IAAD,CAAvB,C,CAA8B;;AAC9B,IAAM,IAAI,GAAG,OAAO,CAAC,IAAD,CAApB;;AAaA,IAAA,SAAA;AAAA;AAAA,YAAA;AAME,WAAA,SAAA,CAAY,EAAZ,EAKkB;QAJhB,EAAA,GAAA,EAAA,CAAA,U;QAAA,UAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,E;QACf,MAAM,GAAA,EAAA,CAAA,M;QACN,QAAQ,GAAA,EAAA,CAAA,Q;QACR,EAAA,GAAA,EAAA,CAAA,O;QAAA,OAAO,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,EAAH,GAAK,E;AAEZ,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,UAAL,GAAkB,UAAlB;AACA,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,UAAL,GAAkB,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AAED,EAAA,SAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,KAAX,EAA0B,UAA1B,EAA8D;AAApC,QAAA,UAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,UAAA,GAAA,EAAA;AAAoC;;AAC5D,QAAM,IAAI,GAAG,IAAI,IAAJ,EAAb;AACA,WAAO,KAAK,MAAL,CAAY,KAAK,QAAjB,EAA2B;AAChC,MAAA,MAAM,EAAE,MADwB;AAEhC,MAAA,OAAO,EAAE,KAAK,OAFkB;AAGhC,MAAA,IAAI,EAAE,IAAI,CAAC,SAAL,CACJ,cAAc,CACZ;AACE,QAAA,GAAG,EAAE,KADP;AAEE,QAAA,UAAU,EAAA,UAFZ;AAGE,QAAA,SAAS,EAAE,IAHb;AAIE,QAAA,QAAQ,EAAE,IAAI,EAJhB;AAKE,QAAA,OAAO,EAAE,IAAI;AALf,OADY,EAQZ,KAAK,UARO,CADV;AAH0B,KAA3B,CAAP;AAgBD,GAlBD;;AAmBF,SAAA,SAAA;AAAC,CAtCD,EAAA","sourcesContent":["import { detectPrng, factory } from 'ulid';\nimport { mergeDeepRight } from 'ramda';\nvar prng = detectPrng(true); // pass `true` to allow insecure Math.rand\nvar ulid = factory(prng);\nvar Analytics = /** @class */ (function () {\n    function Analytics(_a) {\n        var _b = _a.bodyParams, bodyParams = _b === void 0 ? {} : _b, client = _a.client, endpoint = _a.endpoint, _c = _a.headers, headers = _c === void 0 ? {} : _c;\n        this.endpoint = endpoint;\n        this.headers = headers;\n        this.bodyParams = bodyParams;\n        this.client = client;\n        this.trackEvent = this.trackEvent.bind(this);\n    }\n    Analytics.prototype.trackEvent = function (event, properties) {\n        if (properties === void 0) { properties = {}; }\n        var time = new Date();\n        return this.client(this.endpoint, {\n            method: 'POST',\n            headers: this.headers,\n            body: JSON.stringify(mergeDeepRight({\n                key: event,\n                properties: properties,\n                timestamp: time,\n                event_id: ulid(),\n                page_id: ulid(),\n            }, this.bodyParams)),\n        });\n    };\n    return Analytics;\n}());\nexport default Analytics;\n"]},"metadata":{},"sourceType":"module"}