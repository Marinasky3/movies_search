{"ast":null,"code":"import React from 'react';\nimport { useTimer } from './Timer';\n\nfunction noop() {}\n\nfunction returnTrue() {\n  return true;\n}\n\nexport function isPromise(obj) {\n  return typeof obj === 'object' && typeof obj.then === 'function';\n}\nexport function wrapPromise(result) {\n  if (isPromise(result)) {\n    return result;\n  }\n\n  if (typeof result === 'boolean') {\n    return Promise.resolve(result);\n  }\n\n  return Promise.resolve(true);\n}\n/* HOOK */\n\nexport function useDelayedCallback(_a) {\n  var _b = _a.after,\n      after = _b === void 0 ? noop : _b,\n      _c = _a.before,\n      before = _c === void 0 ? returnTrue : _c,\n      _d = _a.delay,\n      delay = _d === void 0 ? 0 : _d,\n      timer = _a.timer;\n  var defaultTimer = useTimer({});\n  var t = timer || defaultTimer;\n  return React.useCallback(function (event) {\n    return wrapPromise(before(event)).then(function (shouldUpdate) {\n      return shouldUpdate && t.setTimer(after, delay);\n    });\n  }, [delay, before, after, t]);\n}","map":{"version":3,"sources":["../../../src/state/DelayedCallback.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAmB,QAAnB,QAAmC,SAAnC;;AAeA,SAAS,IAAT,GAAa,CAAK;;AAElB,SAAS,UAAT,GAAmB;AACjB,SAAO,IAAP;AACD;;AAED,OAAM,SAAU,SAAV,CAAoB,GAApB,EAA4B;AAChC,SAAO,OAAO,GAAP,KAAe,QAAf,IAA2B,OAAO,GAAG,CAAC,IAAX,KAAoB,UAAtD;AACD;AAED,OAAM,SAAU,WAAV,CAAsB,MAAtB,EAA0C;AAC9C,MAAI,SAAS,CAAC,MAAD,CAAb,EAAuB;AACrB,WAAO,MAAP;AACD;;AAED,MAAI,OAAO,MAAP,KAAkB,SAAtB,EAAiC;AAC/B,WAAO,OAAO,CAAC,OAAR,CAAgB,MAAhB,CAAP;AACD;;AAED,SAAO,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAP;AACD;AAED;;AAEA,OAAM,SAAU,kBAAV,CAA6B,EAA7B,EAKkB;MAJtB,EAAA,GAAA,EAAA,CAAA,K;MAAA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,IAAH,GAAO,E;MACZ,EAAA,GAAA,EAAA,CAAA,M;MAAA,MAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,UAAH,GAAa,E;MACnB,EAAA,GAAA,EAAA,CAAA,K;MAAA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,CAAH,GAAI,E;MACT,KAAK,GAAA,EAAA,CAAA,K;AAEL,MAAM,YAAY,GAAG,QAAQ,CAAC,EAAD,CAA7B;AAEA,MAAM,CAAC,GAAG,KAAK,IAAI,YAAnB;AAEA,SAAO,KAAK,CAAC,WAAN,CACL,UAAC,KAAD,EAAW;AACT,WAAO,WAAW,CAAC,MAAM,CAAC,KAAD,CAAP,CAAX,CAA2B,IAA3B,CACL,UAAC,YAAD,EAAsB;AAAK,aAAA,YAAY,IAAI,CAAC,CAAC,QAAF,CAAW,KAAX,EAAhB,KAAgB,CAAhB;AAAwC,KAD9D,CAAP;AAGD,GALI,EAML,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,CAAvB,CANK,CAAP;AAQD","sourcesContent":["import React from 'react';\nimport { useTimer } from './Timer';\nfunction noop() { }\nfunction returnTrue() {\n    return true;\n}\nexport function isPromise(obj) {\n    return typeof obj === 'object' && typeof obj.then === 'function';\n}\nexport function wrapPromise(result) {\n    if (isPromise(result)) {\n        return result;\n    }\n    if (typeof result === 'boolean') {\n        return Promise.resolve(result);\n    }\n    return Promise.resolve(true);\n}\n/* HOOK */\nexport function useDelayedCallback(_a) {\n    var _b = _a.after, after = _b === void 0 ? noop : _b, _c = _a.before, before = _c === void 0 ? returnTrue : _c, _d = _a.delay, delay = _d === void 0 ? 0 : _d, timer = _a.timer;\n    var defaultTimer = useTimer({});\n    var t = timer || defaultTimer;\n    return React.useCallback(function (event) {\n        return wrapPromise(before(event)).then(function (shouldUpdate) { return shouldUpdate && t.setTimer(after, delay); });\n    }, [delay, before, after, t]);\n}\n"]},"metadata":{},"sourceType":"module"}