{"ast":null,"code":"import { scrollIntoView } from '../../utils/scrollIntoView';\n\nfunction noop() {}\n\nvar MOUSE_ENTER = 'mouseenter';\nvar MOUSE_LEAVE = 'mouseleave';\n\nvar isItem = function (element) {\n  return element === null || element === void 0 ? void 0 : element.hasAttribute('data-value');\n};\n\nfunction isGroup(el) {\n  return JSON.parse(el.dataset.group || 'false');\n}\n\nfunction getFirstItem(menu) {\n  var firstItem = menu === null || menu === void 0 ? void 0 : menu.querySelector('[data-value]:first-child');\n\n  if (firstItem && isGroup(firstItem)) {\n    return getNextItem(firstItem);\n  }\n\n  return firstItem;\n}\n\nfunction getPrevItem(item) {\n  var _a, _b, _c;\n\n  if (item.previousElementSibling) {\n    return item.previousElementSibling;\n  }\n\n  if (((_a = item === null || item === void 0 ? void 0 : item.parentElement) === null || _a === void 0 ? void 0 : _a.getAttribute('data-droppable')) === 'true') {\n    var prevDroppableItems = (_c = (_b = item === null || item === void 0 ? void 0 : item.parentElement) === null || _b === void 0 ? void 0 : _b.previousElementSibling) === null || _c === void 0 ? void 0 : _c.querySelectorAll('[data-group=\"false\"]');\n    return (prevDroppableItems === null || prevDroppableItems === void 0 ? void 0 : prevDroppableItems.length) ? prevDroppableItems[prevDroppableItems.length - 1] : null;\n  }\n\n  return null;\n}\n\nfunction getNextItem(item) {\n  var _a, _b, _c;\n\n  if (item.nextElementSibling) {\n    return item.nextElementSibling;\n  }\n\n  if (((_a = item === null || item === void 0 ? void 0 : item.parentElement) === null || _a === void 0 ? void 0 : _a.getAttribute('data-droppable')) === 'true') {\n    return (_c = (_b = item === null || item === void 0 ? void 0 : item.parentElement) === null || _b === void 0 ? void 0 : _b.nextElementSibling) === null || _c === void 0 ? void 0 : _c.querySelector('[data-group=\"false\"]');\n  }\n\n  return null;\n}\n\nfunction getLastItem(menu) {\n  var items = menu === null || menu === void 0 ? void 0 : menu.querySelectorAll('[data-value]');\n  var lastItem = items === null || items === void 0 ? void 0 : items[items.length - 1];\n\n  if (lastItem && isGroup(lastItem)) {\n    return getPrevItem(lastItem);\n  }\n\n  return lastItem;\n}\n\nfunction updateHighlightedAttribute(item, highlight) {\n  item === null || item === void 0 ? void 0 : item.setAttribute('data-highlighted', highlight ? 'true' : 'false');\n  item === null || item === void 0 ? void 0 : item.dispatchEvent(new MouseEvent(highlight ? MOUSE_ENTER : MOUSE_LEAVE));\n}\n\nexport function createSensors(ref, circular) {\n  var highlightedItem = null;\n  var dragAndDropApi = null;\n  var currentDrag = null;\n  var onSelect = noop;\n\n  function select(event) {\n    if (ref.current && highlightedItem) {\n      var disabled = JSON.parse((highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.dataset.disabled) || 'false');\n      if (disabled) return;\n      var item = JSON.parse((highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.dataset.value) || 'null');\n      var selected = JSON.parse((highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.dataset.selected) || 'false');\n      onSelect && onSelect({\n        event: event,\n        item: item,\n        group: false,\n        action: selected ? 'unselected' : 'selected'\n      });\n    }\n  }\n\n  function highlightItem(item, shouldScroll) {\n    if (shouldScroll === void 0) {\n      shouldScroll = true;\n    }\n\n    if (item) {\n      updateHighlightedAttribute(highlightedItem, false); // TODO add localized screenreader instructions for the item\n\n      updateHighlightedAttribute(item, true);\n      highlightedItem = item;\n\n      if (shouldScroll) {\n        scrollIntoView(-1, item);\n      }\n    }\n  }\n\n  function getPrevHighlightableItem(currentItem) {\n    var prev = getPrevItem(currentItem);\n\n    if (prev) {\n      if (isItem(prev)) {\n        if (isGroup(prev)) {\n          return getPrevHighlightableItem(prev);\n        } else {\n          return prev;\n        }\n      }\n    } else if (circular) {\n      return getLastItem(ref.current);\n    }\n\n    return prev;\n  }\n\n  function getNextHighlightableItem(currentItem) {\n    var next = getNextItem(currentItem);\n\n    if (next) {\n      if (isItem(next)) {\n        if (isGroup(next)) {\n          return getNextHighlightableItem(next);\n        }\n\n        return next;\n      }\n    } else if (circular) {\n      return getFirstItem(ref.current);\n    }\n  }\n\n  function highlightFirstItem(shouldScroll) {\n    if (shouldScroll === void 0) {\n      shouldScroll = true;\n    }\n\n    highlightItem(getFirstItem(ref.current), shouldScroll);\n  }\n\n  function highlightLastItem(shouldScroll) {\n    if (shouldScroll === void 0) {\n      shouldScroll = true;\n    }\n\n    highlightItem(getLastItem(ref.current), shouldScroll);\n  }\n\n  function highlightPrevItem() {\n    if (highlightedItem) {\n      highlightItem(getPrevHighlightableItem(highlightedItem));\n    } else {\n      highlightLastItem();\n    }\n  }\n\n  function highlightNextItem() {\n    if (highlightedItem) {\n      highlightItem(getNextHighlightableItem(highlightedItem));\n    } else {\n      highlightFirstItem();\n    }\n  }\n\n  return {\n    handleKeyDown: function (event) {\n      if (ref.current) {\n        if (event.key === 'ArrowUp' || event.key === 'Up') {\n          event.preventDefault();\n          (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.isActive()) ? currentDrag.moveUp() : highlightPrevItem();\n        } else if (event.key === 'ArrowDown' || event.key === 'Down') {\n          event.preventDefault();\n          (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.isActive()) ? currentDrag.moveDown() : highlightNextItem();\n        } else if (event.key === 'Enter') {\n          event.preventDefault();\n\n          if (event.ctrlKey || event.metaKey) {\n            var draggableId = highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.getAttribute('data-rbd-draggable-id');\n\n            if (draggableId) {\n              var preDrag = dragAndDropApi === null || dragAndDropApi === void 0 ? void 0 : dragAndDropApi.tryGetLock(draggableId);\n\n              if (preDrag) {\n                currentDrag = preDrag.snapLift();\n              }\n            }\n          } else if (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.isActive()) {\n            currentDrag.drop();\n          } else {\n            select(event);\n          }\n        } else if (event.key === 'Escape' && (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.isActive())) {\n          currentDrag.cancel();\n        }\n      }\n    },\n    handleItemHover: function (el) {\n      highlightItem(el, false);\n    },\n    useKeyboardSensor: function (api) {\n      dragAndDropApi = api;\n    },\n    updateSelectCallback: function (callback) {\n      onSelect = callback;\n    },\n    highlight: highlightItem,\n    highlighted: function () {\n      return JSON.parse((highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.dataset.value) || 'null');\n    },\n    highlightFirst: highlightFirstItem,\n    highlightLast: highlightLastItem,\n    rehighlightCurrent: function () {\n      var _a; // Rehighlights an item that may have lost its styling due to the re-render of the list items\n\n\n      var draggableId = highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.getAttribute('data-rbd-draggable-id');\n\n      if (draggableId) {\n        var newItem = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rbd-draggable-id=\\\"\".concat(draggableId.replace(/\"/g, '\\\\\"'), \"\\\"]\"));\n        highlightItem(newItem);\n      }\n    },\n    highlightSelected: function (shouldScroll) {\n      var _a;\n\n      if (shouldScroll === void 0) {\n        shouldScroll = true;\n      }\n\n      var selectedItem = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.querySelector('[data-selected=\"true\"]');\n      highlightItem(selectedItem, shouldScroll);\n    },\n    highlightSuggested: function (shouldScroll) {\n      var _a;\n\n      if (shouldScroll === void 0) {\n        shouldScroll = true;\n      }\n\n      var suggestedItem = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.querySelector('[data-suggested=\"true\"]');\n      highlightItem(suggestedItem, shouldScroll);\n    },\n    prev: highlightPrevItem,\n    next: highlightNextItem,\n    select: select\n  };\n}","map":{"version":3,"sources":["../../../../src/components/MenuImperative/sensors.ts"],"names":[],"mappings":"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","sourcesContent":["import { scrollIntoView } from '../../utils/scrollIntoView';\nfunction noop() { }\nvar MOUSE_ENTER = 'mouseenter';\nvar MOUSE_LEAVE = 'mouseleave';\nvar isItem = function (element) { return element === null || element === void 0 ? void 0 : element.hasAttribute('data-value'); };\nfunction isGroup(el) {\n    return JSON.parse(el.dataset.group || 'false');\n}\nfunction getFirstItem(menu) {\n    var firstItem = menu === null || menu === void 0 ? void 0 : menu.querySelector('[data-value]:first-child');\n    if (firstItem && isGroup(firstItem)) {\n        return getNextItem(firstItem);\n    }\n    return firstItem;\n}\nfunction getPrevItem(item) {\n    var _a, _b, _c;\n    if (item.previousElementSibling) {\n        return item.previousElementSibling;\n    }\n    if (((_a = item === null || item === void 0 ? void 0 : item.parentElement) === null || _a === void 0 ? void 0 : _a.getAttribute('data-droppable')) === 'true') {\n        var prevDroppableItems = (_c = (_b = item === null || item === void 0 ? void 0 : item.parentElement) === null || _b === void 0 ? void 0 : _b.previousElementSibling) === null || _c === void 0 ? void 0 : _c.querySelectorAll('[data-group=\"false\"]');\n        return (prevDroppableItems === null || prevDroppableItems === void 0 ? void 0 : prevDroppableItems.length)\n            ? prevDroppableItems[prevDroppableItems.length - 1]\n            : null;\n    }\n    return null;\n}\nfunction getNextItem(item) {\n    var _a, _b, _c;\n    if (item.nextElementSibling) {\n        return item.nextElementSibling;\n    }\n    if (((_a = item === null || item === void 0 ? void 0 : item.parentElement) === null || _a === void 0 ? void 0 : _a.getAttribute('data-droppable')) === 'true') {\n        return (_c = (_b = item === null || item === void 0 ? void 0 : item.parentElement) === null || _b === void 0 ? void 0 : _b.nextElementSibling) === null || _c === void 0 ? void 0 : _c.querySelector('[data-group=\"false\"]');\n    }\n    return null;\n}\nfunction getLastItem(menu) {\n    var items = menu === null || menu === void 0 ? void 0 : menu.querySelectorAll('[data-value]');\n    var lastItem = items === null || items === void 0 ? void 0 : items[items.length - 1];\n    if (lastItem && isGroup(lastItem)) {\n        return getPrevItem(lastItem);\n    }\n    return lastItem;\n}\nfunction updateHighlightedAttribute(item, highlight) {\n    item === null || item === void 0 ? void 0 : item.setAttribute('data-highlighted', highlight ? 'true' : 'false');\n    item === null || item === void 0 ? void 0 : item.dispatchEvent(new MouseEvent(highlight ? MOUSE_ENTER : MOUSE_LEAVE));\n}\nexport function createSensors(ref, circular) {\n    var highlightedItem = null;\n    var dragAndDropApi = null;\n    var currentDrag = null;\n    var onSelect = noop;\n    function select(event) {\n        if (ref.current && highlightedItem) {\n            var disabled = JSON.parse((highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.dataset.disabled) || 'false');\n            if (disabled)\n                return;\n            var item = JSON.parse((highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.dataset.value) || 'null');\n            var selected = JSON.parse((highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.dataset.selected) || 'false');\n            onSelect &&\n                onSelect({\n                    event: event,\n                    item: item,\n                    group: false,\n                    action: selected ? 'unselected' : 'selected',\n                });\n        }\n    }\n    function highlightItem(item, shouldScroll) {\n        if (shouldScroll === void 0) { shouldScroll = true; }\n        if (item) {\n            updateHighlightedAttribute(highlightedItem, false);\n            // TODO add localized screenreader instructions for the item\n            updateHighlightedAttribute(item, true);\n            highlightedItem = item;\n            if (shouldScroll) {\n                scrollIntoView(-1, item);\n            }\n        }\n    }\n    function getPrevHighlightableItem(currentItem) {\n        var prev = getPrevItem(currentItem);\n        if (prev) {\n            if (isItem(prev)) {\n                if (isGroup(prev)) {\n                    return getPrevHighlightableItem(prev);\n                }\n                else {\n                    return prev;\n                }\n            }\n        }\n        else if (circular) {\n            return getLastItem(ref.current);\n        }\n        return prev;\n    }\n    function getNextHighlightableItem(currentItem) {\n        var next = getNextItem(currentItem);\n        if (next) {\n            if (isItem(next)) {\n                if (isGroup(next)) {\n                    return getNextHighlightableItem(next);\n                }\n                return next;\n            }\n        }\n        else if (circular) {\n            return getFirstItem(ref.current);\n        }\n    }\n    function highlightFirstItem(shouldScroll) {\n        if (shouldScroll === void 0) { shouldScroll = true; }\n        highlightItem(getFirstItem(ref.current), shouldScroll);\n    }\n    function highlightLastItem(shouldScroll) {\n        if (shouldScroll === void 0) { shouldScroll = true; }\n        highlightItem(getLastItem(ref.current), shouldScroll);\n    }\n    function highlightPrevItem() {\n        if (highlightedItem) {\n            highlightItem(getPrevHighlightableItem(highlightedItem));\n        }\n        else {\n            highlightLastItem();\n        }\n    }\n    function highlightNextItem() {\n        if (highlightedItem) {\n            highlightItem(getNextHighlightableItem(highlightedItem));\n        }\n        else {\n            highlightFirstItem();\n        }\n    }\n    return {\n        handleKeyDown: function (event) {\n            if (ref.current) {\n                if (event.key === 'ArrowUp' || event.key === 'Up') {\n                    event.preventDefault();\n                    (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.isActive()) ? currentDrag.moveUp() : highlightPrevItem();\n                }\n                else if (event.key === 'ArrowDown' || event.key === 'Down') {\n                    event.preventDefault();\n                    (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.isActive()) ? currentDrag.moveDown() : highlightNextItem();\n                }\n                else if (event.key === 'Enter') {\n                    event.preventDefault();\n                    if (event.ctrlKey || event.metaKey) {\n                        var draggableId = highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.getAttribute('data-rbd-draggable-id');\n                        if (draggableId) {\n                            var preDrag = dragAndDropApi === null || dragAndDropApi === void 0 ? void 0 : dragAndDropApi.tryGetLock(draggableId);\n                            if (preDrag) {\n                                currentDrag = preDrag.snapLift();\n                            }\n                        }\n                    }\n                    else if (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.isActive()) {\n                        currentDrag.drop();\n                    }\n                    else {\n                        select(event);\n                    }\n                }\n                else if (event.key === 'Escape' && (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.isActive())) {\n                    currentDrag.cancel();\n                }\n            }\n        },\n        handleItemHover: function (el) {\n            highlightItem(el, false);\n        },\n        useKeyboardSensor: function (api) {\n            dragAndDropApi = api;\n        },\n        updateSelectCallback: function (callback) {\n            onSelect = callback;\n        },\n        highlight: highlightItem,\n        highlighted: function () {\n            return JSON.parse((highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.dataset.value) || 'null');\n        },\n        highlightFirst: highlightFirstItem,\n        highlightLast: highlightLastItem,\n        rehighlightCurrent: function () {\n            var _a;\n            // Rehighlights an item that may have lost its styling due to the re-render of the list items\n            var draggableId = highlightedItem === null || highlightedItem === void 0 ? void 0 : highlightedItem.getAttribute('data-rbd-draggable-id');\n            if (draggableId) {\n                var newItem = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rbd-draggable-id=\\\"\".concat(draggableId.replace(/\"/g, '\\\\\"'), \"\\\"]\"));\n                highlightItem(newItem);\n            }\n        },\n        highlightSelected: function (shouldScroll) {\n            var _a;\n            if (shouldScroll === void 0) { shouldScroll = true; }\n            var selectedItem = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.querySelector('[data-selected=\"true\"]');\n            highlightItem(selectedItem, shouldScroll);\n        },\n        highlightSuggested: function (shouldScroll) {\n            var _a;\n            if (shouldScroll === void 0) { shouldScroll = true; }\n            var suggestedItem = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.querySelector('[data-suggested=\"true\"]');\n            highlightItem(suggestedItem, shouldScroll);\n        },\n        prev: highlightPrevItem,\n        next: highlightNextItem,\n        select: select,\n    };\n}\n"]},"metadata":{},"sourceType":"module"}