{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { CaretDown, CaretUp, EllipsisVertical } from '@procore/core-icons/dist';\nimport React from 'react';\nimport { addSubcomponents } from '../../utils/addSubcomponents';\nimport { MenuImperative } from '../MenuImperative/MenuImperative';\nimport { OverlayTrigger, useOverlayTriggerContext } from '../OverlayTrigger';\nimport { StyledDropdownButton, StyledDropdownMenu, StyledDropdownSpinner } from './Dropdown.styles';\n\nfunction noop() {}\n\nvar Item = React.forwardRef(function Item(props, ref) {\n  return React.createElement(MenuImperative.Item, __assign({\n    ref: ref\n  }, props));\n});\nexport var DropdownButton = React.forwardRef(function DropdownButton(_a, ref) {\n  var children = _a.children,\n      _b = _a.arrow,\n      arrow = _b === void 0 ? false : _b,\n      _c = _a.loading,\n      loading = _c === void 0 ? false : _c,\n      _d = _a.open,\n      open = _d === void 0 ? false : _d,\n      _e = _a.variant,\n      variant = _e === void 0 ? 'secondary' : _e,\n      props = __rest(_a, [\"children\", \"arrow\", \"loading\", \"open\", \"variant\"]);\n\n  var caret = arrow && (open ? React.createElement(CaretUp, {\n    size: \"sm\"\n  }) : React.createElement(CaretDown, {\n    size: \"sm\"\n  }));\n  var icon = loading ? React.createElement(StyledDropdownSpinner, {\n    size: \"xs\",\n    variant: variant === 'primary' ? 'light' : ''\n  }) : caret;\n  return React.createElement(StyledDropdownButton, __assign({}, props, {\n    \"aria-busy\": loading || undefined,\n    iconRight: icon,\n    \"$loading\": loading,\n    variant: variant,\n    ref: ref\n  }), children);\n});\nvar DropdownMenu = React.forwardRef(function DropdownMenu(_a, ref) {\n  var children = _a.children,\n      footer = _a.footer,\n      i18nScope = _a.i18nScope,\n      menuRef = _a.menuRef,\n      onSearch_ = _a.onSearch,\n      _b = _a.onSelect,\n      onSelect_ = _b === void 0 ? noop : _b;\n  var overlayTriggerContext = useOverlayTriggerContext();\n\n  var _c = React.useState(''),\n      search = _c[0],\n      setSearch = _c[1];\n\n  function onSelect(selection) {\n    overlayTriggerContext.hide(null);\n    onSelect_(selection);\n  }\n\n  function onSearch(e) {\n    setSearch(e.target.value);\n    onSearch_ === null || onSearch_ === void 0 ? void 0 : onSearch_(e);\n  }\n\n  React.useEffect(function () {\n    var _a;\n\n    (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.highlightFirst();\n  }, [menuRef, search]);\n  return React.createElement(StyledDropdownMenu, {\n    ref: ref,\n    shadowStrength: 2\n  }, React.createElement(MenuImperative, {\n    ref: menuRef,\n    onSelect: onSelect\n  }, onSearch_ && React.createElement(MenuImperative.Search, {\n    onChange: onSearch,\n    autoFocus: true,\n    autoComplete: \"false\",\n    i18nScope: i18nScope\n  }), React.createElement(MenuImperative.Options, null, children), footer && React.createElement(MenuImperative.Footer, null, footer)));\n});\nvar Dropdown_ = React.forwardRef(function Dropdown(_a, ref) {\n  var afterHide_ = _a.afterHide,\n      afterShow_ = _a.afterShow,\n      beforeHide = _a.beforeHide,\n      beforeShow = _a.beforeShow,\n      children = _a.children,\n      error = _a.error,\n      footer = _a.footer,\n      _b = _a.i18nScope,\n      i18nScope = _b === void 0 ? 'core.dropdown' : _b,\n      icon = _a.icon,\n      label = _a.label,\n      _c = _a.onKeyDown,\n      onKeyDown_ = _c === void 0 ? noop : _c,\n      onSearch = _a.onSearch,\n      _d = _a.onSelect,\n      onSelect = _d === void 0 ? noop : _d,\n      _e = _a.placement,\n      placement = _e === void 0 ? 'bottom-left' : _e,\n      _f = _a.variant,\n      variant = _f === void 0 ? 'secondary' : _f,\n      props = __rest(_a, [\"afterHide\", \"afterShow\", \"beforeHide\", \"beforeShow\", \"children\", \"error\", \"footer\", \"i18nScope\", \"icon\", \"label\", \"onKeyDown\", \"onSearch\", \"onSelect\", \"placement\", \"variant\"]);\n\n  var menuRef = React.useRef(null);\n\n  function onKeyDown(e) {\n    var _a, _b, _c;\n\n    if (e.key === 'Up' || e.key === 'ArrowUp') {\n      e.preventDefault();\n      (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.prev();\n    } else if (e.key === 'Down' || e.key === 'ArrowDown') {\n      e.preventDefault();\n      (_b = menuRef.current) === null || _b === void 0 ? void 0 : _b.next();\n    } else if (e.key === 'Enter') {\n      e.preventDefault();\n      (_c = menuRef.current) === null || _c === void 0 ? void 0 : _c.select(e);\n    }\n\n    onKeyDown_(e);\n  } // Safari has an issue with giving focus to buttons after clicking on them\n  // if the button or menu do not have focus, the keyboard navigation does not work,\n  // so just focus the menu when we open it. This isn't an issue on other components because\n  // they use a div instead of a button as the trigger\n\n\n  function afterShow() {\n    var _a, _b;\n\n    afterShow_ === null || afterShow_ === void 0 ? void 0 : afterShow_();\n\n    if (!onSearch) {\n      (_b = (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.el) === null || _b === void 0 ? void 0 : _b.focus();\n    }\n  }\n\n  function afterHide() {\n    afterHide_ === null || afterHide_ === void 0 ? void 0 : afterHide_();\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch({\n      target: {\n        value: ''\n      }\n    });\n  }\n\n  return React.createElement(OverlayTrigger, {\n    afterHide: afterHide,\n    afterShow: afterShow,\n    beforeHide: beforeHide,\n    beforeShow: beforeShow,\n    overlay: React.createElement(DropdownMenu, {\n      footer: footer,\n      i18nScope: i18nScope,\n      menuRef: menuRef,\n      onSearch: onSearch,\n      onSelect: onSelect\n    }, children),\n    placement: placement,\n    ref: ref,\n    restoreFocusOnHide: false\n  }, function () {\n    return React.createElement(DropdownButton, __assign({}, props, {\n      arrow: label !== undefined,\n      icon: props.loading && !label ? undefined : !icon && !label ? React.createElement(EllipsisVertical, null) : icon,\n      onKeyDown: onKeyDown,\n      variant: variant\n    }), label);\n  });\n});\nexport var useDropdownContext = useOverlayTriggerContext;\n/**\n * @deprecated Please use `useDropdownContext()` instead\n */\n\nexport var consumeDropdown = useDropdownContext;\nexport function DropdownConsumer(_a) {\n  var children = _a.children;\n  return children(useDropdownContext());\n}\nexport var Dropdown = addSubcomponents(Dropdown_, {\n  Item: Item\n});\nexport default Dropdown;","map":{"version":3,"sources":["../../../../src/components/Dropdown/Dropdown.tsx"],"names":[],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { CaretDown, CaretUp, EllipsisVertical } from '@procore/core-icons/dist';\nimport React from 'react';\nimport { addSubcomponents } from '../../utils/addSubcomponents';\nimport { MenuImperative } from '../MenuImperative/MenuImperative';\nimport { OverlayTrigger, useOverlayTriggerContext } from '../OverlayTrigger';\nimport { StyledDropdownButton, StyledDropdownMenu, StyledDropdownSpinner, } from './Dropdown.styles';\nfunction noop() { }\nvar Item = React.forwardRef(function Item(props, ref) {\n    return React.createElement(MenuImperative.Item, __assign({ ref: ref }, props));\n});\nexport var DropdownButton = React.forwardRef(function DropdownButton(_a, ref) {\n    var children = _a.children, _b = _a.arrow, arrow = _b === void 0 ? false : _b, _c = _a.loading, loading = _c === void 0 ? false : _c, _d = _a.open, open = _d === void 0 ? false : _d, _e = _a.variant, variant = _e === void 0 ? 'secondary' : _e, props = __rest(_a, [\"children\", \"arrow\", \"loading\", \"open\", \"variant\"]);\n    var caret = arrow && (open ? React.createElement(CaretUp, { size: \"sm\" }) : React.createElement(CaretDown, { size: \"sm\" }));\n    var icon = loading ? (React.createElement(StyledDropdownSpinner, { size: \"xs\", variant: variant === 'primary' ? 'light' : '' })) : (caret);\n    return (React.createElement(StyledDropdownButton, __assign({}, props, { \"aria-busy\": loading || undefined, iconRight: icon, \"$loading\": loading, variant: variant, ref: ref }), children));\n});\nvar DropdownMenu = React.forwardRef(function DropdownMenu(_a, ref) {\n    var children = _a.children, footer = _a.footer, i18nScope = _a.i18nScope, menuRef = _a.menuRef, onSearch_ = _a.onSearch, _b = _a.onSelect, onSelect_ = _b === void 0 ? noop : _b;\n    var overlayTriggerContext = useOverlayTriggerContext();\n    var _c = React.useState(''), search = _c[0], setSearch = _c[1];\n    function onSelect(selection) {\n        overlayTriggerContext.hide(null);\n        onSelect_(selection);\n    }\n    function onSearch(e) {\n        setSearch(e.target.value);\n        onSearch_ === null || onSearch_ === void 0 ? void 0 : onSearch_(e);\n    }\n    React.useEffect(function () {\n        var _a;\n        (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.highlightFirst();\n    }, [menuRef, search]);\n    return (React.createElement(StyledDropdownMenu, { ref: ref, shadowStrength: 2 },\n        React.createElement(MenuImperative, { ref: menuRef, onSelect: onSelect },\n            onSearch_ && (React.createElement(MenuImperative.Search, { onChange: onSearch, autoFocus: true, autoComplete: \"false\", i18nScope: i18nScope })),\n            React.createElement(MenuImperative.Options, null, children),\n            footer && React.createElement(MenuImperative.Footer, null, footer))));\n});\nvar Dropdown_ = React.forwardRef(function Dropdown(_a, ref) {\n    var afterHide_ = _a.afterHide, afterShow_ = _a.afterShow, beforeHide = _a.beforeHide, beforeShow = _a.beforeShow, children = _a.children, error = _a.error, footer = _a.footer, _b = _a.i18nScope, i18nScope = _b === void 0 ? 'core.dropdown' : _b, icon = _a.icon, label = _a.label, _c = _a.onKeyDown, onKeyDown_ = _c === void 0 ? noop : _c, onSearch = _a.onSearch, _d = _a.onSelect, onSelect = _d === void 0 ? noop : _d, _e = _a.placement, placement = _e === void 0 ? 'bottom-left' : _e, _f = _a.variant, variant = _f === void 0 ? 'secondary' : _f, props = __rest(_a, [\"afterHide\", \"afterShow\", \"beforeHide\", \"beforeShow\", \"children\", \"error\", \"footer\", \"i18nScope\", \"icon\", \"label\", \"onKeyDown\", \"onSearch\", \"onSelect\", \"placement\", \"variant\"]);\n    var menuRef = React.useRef(null);\n    function onKeyDown(e) {\n        var _a, _b, _c;\n        if (e.key === 'Up' || e.key === 'ArrowUp') {\n            e.preventDefault();\n            (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.prev();\n        }\n        else if (e.key === 'Down' || e.key === 'ArrowDown') {\n            e.preventDefault();\n            (_b = menuRef.current) === null || _b === void 0 ? void 0 : _b.next();\n        }\n        else if (e.key === 'Enter') {\n            e.preventDefault();\n            (_c = menuRef.current) === null || _c === void 0 ? void 0 : _c.select(e);\n        }\n        onKeyDown_(e);\n    }\n    // Safari has an issue with giving focus to buttons after clicking on them\n    // if the button or menu do not have focus, the keyboard navigation does not work,\n    // so just focus the menu when we open it. This isn't an issue on other components because\n    // they use a div instead of a button as the trigger\n    function afterShow() {\n        var _a, _b;\n        afterShow_ === null || afterShow_ === void 0 ? void 0 : afterShow_();\n        if (!onSearch) {\n            (_b = (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.el) === null || _b === void 0 ? void 0 : _b.focus();\n        }\n    }\n    function afterHide() {\n        afterHide_ === null || afterHide_ === void 0 ? void 0 : afterHide_();\n        onSearch === null || onSearch === void 0 ? void 0 : onSearch({\n            target: { value: '' },\n        });\n    }\n    return (React.createElement(OverlayTrigger, { afterHide: afterHide, afterShow: afterShow, beforeHide: beforeHide, beforeShow: beforeShow, overlay: React.createElement(DropdownMenu, { footer: footer, i18nScope: i18nScope, menuRef: menuRef, onSearch: onSearch, onSelect: onSelect }, children), placement: placement, ref: ref, restoreFocusOnHide: false }, function () { return (React.createElement(DropdownButton, __assign({}, props, { arrow: label !== undefined, icon: props.loading && !label ? undefined : !icon && !label ? (React.createElement(EllipsisVertical, null)) : (icon), onKeyDown: onKeyDown, variant: variant }), label)); }));\n});\nexport var useDropdownContext = useOverlayTriggerContext;\n/**\n * @deprecated Please use `useDropdownContext()` instead\n */\nexport var consumeDropdown = useDropdownContext;\nexport function DropdownConsumer(_a) {\n    var children = _a.children;\n    return children(useDropdownContext());\n}\nexport var Dropdown = addSubcomponents(Dropdown_, { Item: Item });\nexport default Dropdown;\n"]},"metadata":{},"sourceType":"module"}