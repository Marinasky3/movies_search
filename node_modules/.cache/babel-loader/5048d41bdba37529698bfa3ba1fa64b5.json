{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { times } from 'ramda';\nimport React from 'react';\nimport { DropdownButton } from '../Dropdown';\nimport MenuImperative from '../MenuImperative';\nimport { OverlayTrigger, useOverlayTriggerContext } from '../OverlayTrigger';\nimport { StyledOverlay } from './Pagination.styles';\n\nvar noop = function () {};\n\nvar PaginationMenu = React.forwardRef(function PaginationMenu(_a, ref) {\n  var activePage = _a.activePage,\n      menuRef = _a.menuRef,\n      _b = _a.onSelect,\n      onSelect_ = _b === void 0 ? noop : _b,\n      pages = _a.pages;\n  var ctx = useOverlayTriggerContext();\n  var lastItemRef = React.useRef(null);\n  var hasFooter = pages > 10;\n  React.useEffect(function () {\n    var _a;\n\n    (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.highlightFirst();\n  }, [menuRef]);\n  React.useEffect(function () {\n    var _a, _b;\n\n    (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.highlightSuggested();\n    (_b = menuRef.current) === null || _b === void 0 ? void 0 : _b.highlightSelected();\n  }, [menuRef]);\n\n  function onKeyDown(event) {\n    var _a, _b, _c;\n\n    var currentPage = (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.highlighted();\n\n    if (event.key === 'ArrowDown' || event.key === 'Down') {\n      // when on the second to last item, want to jump to the last item (in the footer)\n      if (currentPage === pages - 1 && lastItemRef.current) {\n        (_b = menuRef.current) === null || _b === void 0 ? void 0 : _b.highlight(lastItemRef.current);\n      }\n    } else if (event.key === 'ArrowUp' || event.key === 'Up') {\n      // on the last item (in the footer), want to jump back to the second to last\n      // item back in the menu\n      if (hasFooter && currentPage === pages) {\n        event.stopPropagation();\n        (_c = menuRef.current) === null || _c === void 0 ? void 0 : _c.highlightLast();\n      }\n    }\n  }\n\n  function onSelect(selection) {\n    onSelect_(selection);\n    ctx.hide(selection.event);\n  }\n\n  var children = times(function (index) {\n    var page = index + 1;\n    return React.createElement(MenuImperative.Item, {\n      item: page,\n      key: index,\n      selected: page === activePage,\n      ref: lastItemRef\n    }, page);\n  }, pages);\n  return React.createElement(StyledOverlay, {\n    ref: ref,\n    shadowStrength: 2\n  }, React.createElement(MenuImperative, {\n    ref: menuRef,\n    onKeyDown: onKeyDown,\n    onSelect: onSelect\n  }, hasFooter ? React.createElement(React.Fragment, null, React.createElement(MenuImperative.Options, null, children.slice(0, -1)), React.createElement(MenuImperative.Footer, {\n    padding: \"xs none\"\n  }, children[children.length - 1])) : React.createElement(MenuImperative.Options, null, children)));\n});\nexport var PaginationSelect = React.forwardRef(function PaginationSelect(_a, ref) {\n  var _b = _a.activePage,\n      activePage = _b === void 0 ? 1 : _b,\n      disabled = _a.disabled,\n      onSelect = _a.onSelect,\n      _c = _a.pages,\n      pages = _c === void 0 ? 0 : _c,\n      props = __rest(_a, [\"activePage\", \"disabled\", \"onSelect\", \"pages\"]);\n\n  var menuRef = React.useRef(null); // Safari has an issue with giving focus to buttons after clicking on them\n  // if the button or menu do not have focus, the keyboard navigation does not work,\n  // so just focus the menu when we open it\n\n  function afterShow() {\n    var _a, _b, _c; // this is brittle, if MenuImperative dom structure changes this could break\n    // but super specific to pagination, not really a concern elsewhere\n\n\n    ;\n    (_c = (_b = (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.el) === null || _b === void 0 ? void 0 : _b.firstChild) === null || _c === void 0 ? void 0 : _c.focus();\n  }\n\n  function onKeyDown(e) {\n    var _a, _b, _c;\n\n    if (e.key === 'Up' || e.key === 'ArrowUp') {\n      e.preventDefault();\n      (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.prev();\n    } else if (e.key === 'Down' || e.key === 'ArrowDown') {\n      e.preventDefault();\n      (_b = menuRef.current) === null || _b === void 0 ? void 0 : _b.next();\n    } else if (e.key === 'Enter') {\n      e.preventDefault();\n      (_c = menuRef.current) === null || _c === void 0 ? void 0 : _c.select(e);\n    }\n  }\n\n  return React.createElement(OverlayTrigger, __assign({\n    afterShow: afterShow,\n    overlay: React.createElement(PaginationMenu, {\n      activePage: activePage,\n      menuRef: menuRef,\n      onSelect: onSelect,\n      pages: pages\n    }),\n    placement: \"bottom-left\",\n    ref: ref,\n    trigger: \"click\"\n  }, props), React.createElement(DropdownButton, {\n    arrow: true,\n    disabled: disabled,\n    onKeyDown: onKeyDown,\n    variant: \"tertiary\"\n  }, activePage));\n});","map":{"version":3,"sources":["../../../../src/components/Pagination/PaginationSelect.tsx"],"names":[],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { times } from 'ramda';\nimport React from 'react';\nimport { DropdownButton } from '../Dropdown';\nimport MenuImperative from '../MenuImperative';\nimport { OverlayTrigger, useOverlayTriggerContext } from '../OverlayTrigger';\nimport { StyledOverlay } from './Pagination.styles';\nvar noop = function () { };\nvar PaginationMenu = React.forwardRef(function PaginationMenu(_a, ref) {\n    var activePage = _a.activePage, menuRef = _a.menuRef, _b = _a.onSelect, onSelect_ = _b === void 0 ? noop : _b, pages = _a.pages;\n    var ctx = useOverlayTriggerContext();\n    var lastItemRef = React.useRef(null);\n    var hasFooter = pages > 10;\n    React.useEffect(function () {\n        var _a;\n        (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.highlightFirst();\n    }, [menuRef]);\n    React.useEffect(function () {\n        var _a, _b;\n        (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.highlightSuggested();\n        (_b = menuRef.current) === null || _b === void 0 ? void 0 : _b.highlightSelected();\n    }, [menuRef]);\n    function onKeyDown(event) {\n        var _a, _b, _c;\n        var currentPage = (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.highlighted();\n        if (event.key === 'ArrowDown' || event.key === 'Down') {\n            // when on the second to last item, want to jump to the last item (in the footer)\n            if (currentPage === pages - 1 && lastItemRef.current) {\n                (_b = menuRef.current) === null || _b === void 0 ? void 0 : _b.highlight(lastItemRef.current);\n            }\n        }\n        else if (event.key === 'ArrowUp' || event.key === 'Up') {\n            // on the last item (in the footer), want to jump back to the second to last\n            // item back in the menu\n            if (hasFooter && currentPage === pages) {\n                event.stopPropagation();\n                (_c = menuRef.current) === null || _c === void 0 ? void 0 : _c.highlightLast();\n            }\n        }\n    }\n    function onSelect(selection) {\n        onSelect_(selection);\n        ctx.hide(selection.event);\n    }\n    var children = times(function (index) {\n        var page = index + 1;\n        return (React.createElement(MenuImperative.Item, { item: page, key: index, selected: page === activePage, ref: lastItemRef }, page));\n    }, pages);\n    return (React.createElement(StyledOverlay, { ref: ref, shadowStrength: 2 },\n        React.createElement(MenuImperative, { ref: menuRef, onKeyDown: onKeyDown, onSelect: onSelect }, hasFooter ? (React.createElement(React.Fragment, null,\n            React.createElement(MenuImperative.Options, null, children.slice(0, -1)),\n            React.createElement(MenuImperative.Footer, { padding: \"xs none\" }, children[children.length - 1]))) : (React.createElement(MenuImperative.Options, null, children)))));\n});\nexport var PaginationSelect = React.forwardRef(function PaginationSelect(_a, ref) {\n    var _b = _a.activePage, activePage = _b === void 0 ? 1 : _b, disabled = _a.disabled, onSelect = _a.onSelect, _c = _a.pages, pages = _c === void 0 ? 0 : _c, props = __rest(_a, [\"activePage\", \"disabled\", \"onSelect\", \"pages\"]);\n    var menuRef = React.useRef(null);\n    // Safari has an issue with giving focus to buttons after clicking on them\n    // if the button or menu do not have focus, the keyboard navigation does not work,\n    // so just focus the menu when we open it\n    function afterShow() {\n        var _a, _b, _c;\n        // this is brittle, if MenuImperative dom structure changes this could break\n        // but super specific to pagination, not really a concern elsewhere\n        ;\n        (_c = (_b = (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.el) === null || _b === void 0 ? void 0 : _b.firstChild) === null || _c === void 0 ? void 0 : _c.focus();\n    }\n    function onKeyDown(e) {\n        var _a, _b, _c;\n        if (e.key === 'Up' || e.key === 'ArrowUp') {\n            e.preventDefault();\n            (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.prev();\n        }\n        else if (e.key === 'Down' || e.key === 'ArrowDown') {\n            e.preventDefault();\n            (_b = menuRef.current) === null || _b === void 0 ? void 0 : _b.next();\n        }\n        else if (e.key === 'Enter') {\n            e.preventDefault();\n            (_c = menuRef.current) === null || _c === void 0 ? void 0 : _c.select(e);\n        }\n    }\n    return (React.createElement(OverlayTrigger, __assign({ afterShow: afterShow, overlay: React.createElement(PaginationMenu, { activePage: activePage, menuRef: menuRef, onSelect: onSelect, pages: pages }), placement: \"bottom-left\", ref: ref, trigger: \"click\" }, props),\n        React.createElement(DropdownButton, { arrow: true, disabled: disabled, onKeyDown: onKeyDown, variant: \"tertiary\" }, activePage)));\n});\n"]},"metadata":{},"sourceType":"module"}