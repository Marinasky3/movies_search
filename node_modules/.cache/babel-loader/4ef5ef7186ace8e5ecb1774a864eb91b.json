{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport { isFunction } from 'formik';\nimport { useListNavigation } from '../../../state/ListNavigation';\nimport { StyledFileToken, StyledTokenList } from './FileTokenList.styles';\n\nfunction noop() {}\n\nfunction getProgress(_a) {\n  var progress = _a.progress;\n  return progress !== null && progress !== void 0 ? progress : 100;\n}\n\nfunction isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\nexport var FileTokenList = React.forwardRef(function FileTokenList(_a, ref) {\n  var tokens = _a.tokens,\n      onClick = _a.onClick,\n      _b = _a.onClose,\n      onClose = _b === void 0 ? noop : _b,\n      qa = _a.qa,\n      onKeyDown = _a.onKeyDown,\n      props = __rest(_a, [\"tokens\", \"onClick\", \"onClose\", \"qa\", \"onKeyDown\"]);\n\n  var focusedTokenRef = React.useRef(null);\n\n  var _c = React.useState(false),\n      isListFocused = _c[0],\n      setIsListFocused = _c[1];\n\n  var navigation = useListNavigation({\n    circular: false,\n    initialIndex: 0,\n    size: tokens.length\n  });\n  React.useEffect(function () {\n    navigation.setSize(tokens.length);\n    if (tokens.length === 0) setIsListFocused(false);\n  }, [navigation, tokens.length]);\n  React.useEffect(function () {\n    if (focusedTokenRef.current && isListFocused) {\n      focusedTokenRef.current.focus();\n    }\n  }, [isListFocused, navigation]);\n  var onKeyDownHandler = React.useCallback(function (e) {\n    if (!isListFocused) return;\n    var token = tokens[navigation.index];\n\n    switch (e.key) {\n      case 'Backspace':\n      case 'Delete':\n        e.preventDefault();\n\n        if (!e.repeat) {\n          onClose(token);\n\n          if (tokens.length >= 1) {\n            navigation.set(Math.max(0, navigation.index - 1));\n          }\n        }\n\n        break;\n\n      case 'Space Bar':\n      case ' ':\n        e.preventDefault();\n        var error = token.error;\n\n        if (isUndefined(error) && getProgress(token) === 100) {\n          onClick === null || onClick === void 0 ? void 0 : onClick(token);\n        }\n\n        break;\n\n      case 'ArrowUp':\n      case 'Up':\n      case 'ArrowLeft':\n      case 'Left':\n        e.preventDefault();\n        navigation.decrement();\n        break;\n\n      case 'ArrowDown':\n      case 'Down':\n      case 'ArrowRight':\n      case 'Right':\n        e.preventDefault();\n        navigation.increment();\n        break;\n\n      default:\n    }\n\n    onKeyDown && onKeyDown(e);\n  }, [isListFocused, navigation, onClick, onClose, onKeyDown, tokens]);\n  return React.createElement(StyledTokenList, __assign({}, props, {\n    ref: ref,\n    onFocus: function () {\n      return setIsListFocused(true);\n    },\n    onBlur: function () {\n      return setIsListFocused(false);\n    },\n    onKeyDown: onKeyDownHandler\n  }), tokens.map(function (token, index) {\n    var _a;\n\n    var isFocused = navigation.index === index;\n    return React.createElement(StyledFileToken, {\n      \"data-qa\": (_a = qa === null || qa === void 0 ? void 0 : qa.fileToken) === null || _a === void 0 ? void 0 : _a.call(qa, token.id),\n      qa: qa,\n      key: token.id,\n      ref: isFocused ? focusedTokenRef : null,\n      tabIndex: isFocused ? 0 : -1,\n      progressValue: getProgress(token),\n      errorMessage: token.error,\n      fileName: token.name,\n      onFocus: function () {\n        return navigation.set(index);\n      },\n      onLabelClick: isFunction(onClick) ? function () {\n        return onClick(token);\n      } : onClick,\n      onClose: function () {\n        return onClose(token);\n      }\n    });\n  }));\n});\nFileTokenList.displayName = 'FileTokenList';\nexport default FileTokenList;","map":{"version":3,"sources":["../../../../../src/components/FileSelect/FileTokenList/FileTokenList.tsx"],"names":[],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { isFunction } from 'formik';\nimport { useListNavigation } from '../../../state/ListNavigation';\nimport { StyledFileToken, StyledTokenList } from './FileTokenList.styles';\nfunction noop() { }\nfunction getProgress(_a) {\n    var progress = _a.progress;\n    return progress !== null && progress !== void 0 ? progress : 100;\n}\nfunction isUndefined(value) {\n    return typeof value === 'undefined';\n}\nexport var FileTokenList = React.forwardRef(function FileTokenList(_a, ref) {\n    var tokens = _a.tokens, onClick = _a.onClick, _b = _a.onClose, onClose = _b === void 0 ? noop : _b, qa = _a.qa, onKeyDown = _a.onKeyDown, props = __rest(_a, [\"tokens\", \"onClick\", \"onClose\", \"qa\", \"onKeyDown\"]);\n    var focusedTokenRef = React.useRef(null);\n    var _c = React.useState(false), isListFocused = _c[0], setIsListFocused = _c[1];\n    var navigation = useListNavigation({\n        circular: false,\n        initialIndex: 0,\n        size: tokens.length,\n    });\n    React.useEffect(function () {\n        navigation.setSize(tokens.length);\n        if (tokens.length === 0)\n            setIsListFocused(false);\n    }, [navigation, tokens.length]);\n    React.useEffect(function () {\n        if (focusedTokenRef.current && isListFocused) {\n            focusedTokenRef.current.focus();\n        }\n    }, [isListFocused, navigation]);\n    var onKeyDownHandler = React.useCallback(function (e) {\n        if (!isListFocused)\n            return;\n        var token = tokens[navigation.index];\n        switch (e.key) {\n            case 'Backspace':\n            case 'Delete':\n                e.preventDefault();\n                if (!e.repeat) {\n                    onClose(token);\n                    if (tokens.length >= 1) {\n                        navigation.set(Math.max(0, navigation.index - 1));\n                    }\n                }\n                break;\n            case 'Space Bar':\n            case ' ':\n                e.preventDefault();\n                var error = token.error;\n                if (isUndefined(error) && getProgress(token) === 100) {\n                    onClick === null || onClick === void 0 ? void 0 : onClick(token);\n                }\n                break;\n            case 'ArrowUp':\n            case 'Up':\n            case 'ArrowLeft':\n            case 'Left':\n                e.preventDefault();\n                navigation.decrement();\n                break;\n            case 'ArrowDown':\n            case 'Down':\n            case 'ArrowRight':\n            case 'Right':\n                e.preventDefault();\n                navigation.increment();\n                break;\n            default:\n        }\n        onKeyDown && onKeyDown(e);\n    }, [isListFocused, navigation, onClick, onClose, onKeyDown, tokens]);\n    return (React.createElement(StyledTokenList, __assign({}, props, { ref: ref, onFocus: function () { return setIsListFocused(true); }, onBlur: function () { return setIsListFocused(false); }, onKeyDown: onKeyDownHandler }), tokens.map(function (token, index) {\n        var _a;\n        var isFocused = navigation.index === index;\n        return (React.createElement(StyledFileToken, { \"data-qa\": (_a = qa === null || qa === void 0 ? void 0 : qa.fileToken) === null || _a === void 0 ? void 0 : _a.call(qa, token.id), qa: qa, key: token.id, ref: isFocused ? focusedTokenRef : null, tabIndex: isFocused ? 0 : -1, progressValue: getProgress(token), errorMessage: token.error, fileName: token.name, onFocus: function () { return navigation.set(index); }, onLabelClick: isFunction(onClick) ? function () { return onClick(token); } : onClick, onClose: function () { return onClose(token); } }));\n    })));\n});\nFileTokenList.displayName = 'FileTokenList';\nexport default FileTokenList;\n"]},"metadata":{},"sourceType":"module"}